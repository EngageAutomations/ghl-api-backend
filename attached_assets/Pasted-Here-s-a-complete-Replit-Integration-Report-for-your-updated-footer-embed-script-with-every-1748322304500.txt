Hereâ€™s a complete **Replit Integration Report** for your updated **footer embed script**, with every configurable value clearly marked and explained. This version supports user-defined domains, form IDs, parameter names/values, and optional UTM tags.

---

## âœ… Replit Integration Report: Custom Form Embed Footer Script (Fully Dynamic)

This script injects an iframe-based form below the `#description` element on any page. It supports:

* Custom domains
* Dynamic form IDs
* Custom query parameter names and values
* Optional UTM tracking
* Responsive fade-in behavior
* Re-injection prevention

---

### ðŸ“„ Full Script Block (Place before `</body>`)

```html
<script>
  // ðŸ”§ Auto-grabs the last URL segment as a fallback slug
  function getSlugFromUrl() {
    const parts = window.location.pathname.split('/');
    return parts[parts.length - 1] || "unknown";
  }

  // ðŸ’¡ Main injection function using user-provided config
  function injectCustomForm({
    baseDomain = 'https://app.makerexpress3d.com', // [EDITABLE] ðŸŸ¢ Set user domain
    formId = '',                                   // [EDITABLE] ðŸŸ¢ Set form ID
    height = 470,                                  // [EDITABLE] ðŸŸ¢ Set base form height
    paramName = 'listing',                         // [EDITABLE] ðŸŸ¢ Set custom query key
    paramValue = '',                               // [EDITABLE] ðŸŸ¢ Optional: override slug
    utm = 'directory'                              // [EDITABLE] ðŸŸ¢ Optional UTM tag
  } = {}) {
    // âœ… Safety checks
    if (!formId || !paramName || document.querySelector('.description-form-flexwrap')) return;

    const desc = document.getElementById('description');
    if (!desc) return;

    const finalValue = paramValue || getSlugFromUrl(); // fallback to slug if paramValue is blank

    // ðŸ”— Construct query string dynamically
    const queryParams = new URLSearchParams({
      [paramName]: finalValue,
      utm_source: utm
    });

    // ðŸ”¨ Build full embed URL
    const embedUrl = `${baseDomain}/widget/form/${formId}?${queryParams.toString()}`;

    // ðŸ§± Layout wrapper
    const wrapper = document.createElement('div');
    wrapper.className = 'description-form-flexwrap';
    desc.parentNode.insertBefore(wrapper, desc);
    wrapper.appendChild(desc);

    // ðŸ–¼ï¸ Iframe setup with fade-in
    const iframe = document.createElement('iframe');
    iframe.className = 'inline-listing-form';
    iframe.src = embedUrl;
    iframe.style.height = `${height + 100}px`; // [EDITABLE] â¬† Adds padding
    iframe.style.opacity = '0';
    iframe.style.transition = 'opacity 0.6s ease';
    iframe.style.pointerEvents = 'none';

    iframe.onload = () => {
      iframe.classList.add('visible');
      iframe.style.opacity = '1';
      iframe.style.pointerEvents = 'auto';
    };

    wrapper.appendChild(iframe);
    document.body.classList.add('form-injected');
  }

  // ðŸš€ Config Example (set dynamically from Replit)
  const parsedEmbedData = {
    baseDomain: 'https://custom.domain.com',      // [EDITABLE] ðŸŸ¢ Userâ€™s white-labeled domain
    formId: 'yZsYJQfelidUiq28ij5v',                // [EDITABLE] ðŸŸ¢ Replace with actual form ID
    height: 470,                                   // [EDITABLE] ðŸŸ¢ Custom height if needed
    paramName: 'item',                             // [EDITABLE] ðŸŸ¢ Custom parameter name
    paramValue: '',                                // [EDITABLE] ðŸŸ¢ Optional, uses slug if blank
    utm: 'homepage-directory'                      // [EDITABLE] ðŸŸ¢ Optional UTM tag
  };

  // ðŸ§© Inject on page load and re-check via DOM observer
  document.addEventListener("DOMContentLoaded", () => injectCustomForm(parsedEmbedData));
  new MutationObserver(() => injectCustomForm(parsedEmbedData)).observe(document.body, { childList: true, subtree: true });
</script>
```

---

### ðŸ§  Summary of Editable Fields

| Key          | Description                                  | Default Value                    | Editable? |
| ------------ | -------------------------------------------- | -------------------------------- | --------- |
| `baseDomain` | The base domain where the form is hosted     | `https://app.makerexpress3d.com` | âœ… Yes     |
| `formId`     | The formâ€™s unique ID                         | `'yZsYJQfelidUiq28ij5v'`         | âœ… Yes     |
| `height`     | Iframe height (before +100 padding is added) | `470`                            | âœ… Yes     |
| `paramName`  | Query string key to pass data                | `'listing'`                      | âœ… Yes     |
| `paramValue` | Query string value (falls back to URL slug)  | `''` (fallbacks to slug)         | âœ… Yes     |
| `utm`        | Optional UTM source parameter                | `'directory'`                    | âœ… Yes     |

---

### âœ… Example Resulting URL

If the user sets:

```js
baseDomain: 'https://form.partneragency.com',
formId: 'abc123',
paramName: 'product',
paramValue: 'solar-lamp'
```

Then the generated iframe URL will be:

```
https://form.partneragency.com/widget/form/abc123?product=solar-lamp&utm_source=directory
```

---

Let me know if you'd like a paired config form UI for this in Replit, or if we should support fallback to default config when values are missing!
