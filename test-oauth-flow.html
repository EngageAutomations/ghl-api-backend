<!DOCTYPE html>
<html>
<head>
    <title>OAuth Flow Test</title>
</head>
<body>
    <h1>Testing OAuth Integration</h1>
    <button onclick="testOAuth()">Test OAuth Flow</button>
    <div id="result"></div>
    
    <script>
        function testOAuth() {
            const clientId = '67472ecce8b57dd9eda067a8';
            const redirectUri = 'https://dir.engageautomations.com/';
            const state = 'test_' + Date.now();
            
            const authUrl = new URL('https://marketplace.gohighlevel.com/oauth/chooselocation');
            authUrl.searchParams.set('response_type', 'code');
            authUrl.searchParams.set('client_id', clientId);
            authUrl.searchParams.set('redirect_uri', redirectUri);
            authUrl.searchParams.set('scope', 'products/prices.write products/prices.readonly products/collection.write products/collection.readonly medias.write medias.readonly locations.readonly contacts.readonly contacts.write');
            authUrl.searchParams.set('state', state);
            
            document.getElementById('result').innerHTML = `
                <p>OAuth URL generated successfully:</p>
                <a href="${authUrl.toString()}" target="_blank">Click to test OAuth flow</a>
                <p><small>State: ${state}</small></p>
            `;
        }
    </script>
</body>
</html>