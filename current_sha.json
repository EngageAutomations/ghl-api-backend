{
  "name": "index.js",
  "path": "index.js",
  "sha": "d58f0bc77e6b4c0670c2581f0b0415eb453e5d3a",
  "size": 47787,
  "url": "https://api.github.com/repos/EngageAutomations/oauth-backend/contents/index.js?ref=main",
  "html_url": "https://github.com/EngageAutomations/oauth-backend/blob/main/index.js",
  "git_url": "https://api.github.com/repos/EngageAutomations/oauth-backend/git/blobs/d58f0bc77e6b4c0670c2581f0b0415eb453e5d3a",
  "download_url": "https://raw.githubusercontent.com/EngageAutomations/oauth-backend/main/index.js",
  "type": "file",
  "content": "Ly8gT0F1dGggQmFja2VuZCBGaXggLSBBZGQgbWlzc2luZyBlbmRwb2ludHMg\nZm9yIGluc3RhbGxhdGlvbiB0cmFja2luZwovLyBUaGlzIGZpbGUgYWRkcyB0\naGUgbWlzc2luZyAvaW5zdGFsbGF0aW9ucyBlbmRwb2ludCBhbmQgZGVidWdn\naW5nCgpjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpOwpjb25z\ndCBjb3JzID0gcmVxdWlyZSgnY29ycycpOwpjb25zdCBheGlvcyA9IHJlcXVp\ncmUoJ2F4aW9zJyk7CmNvbnN0IG11bHRlciA9IHJlcXVpcmUoJ211bHRlcicp\nOwpjb25zdCBGb3JtRGF0YSA9IHJlcXVpcmUoJ2Zvcm0tZGF0YScpOwpjb25z\ndCBmcyA9IHJlcXVpcmUoJ2ZzJyk7CgovLyBDb25maWd1cmUgbXVsdGVyIGZv\nciBmaWxlIHVwbG9hZHMKY29uc3QgdXBsb2FkID0gbXVsdGVyKHsgCiAgZGVz\ndDogJ3VwbG9hZHMvJywKICBsaW1pdHM6IHsgZmlsZVNpemU6IDI1ICogMTAy\nNCAqIDEwMjQgfSAvLyAyNU1CIGxpbWl0Cn0pOwoKY29uc3QgYXBwID0gZXhw\ncmVzcygpOwpjb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAw\nOwoKLy8gTWlkZGxld2FyZQphcHAudXNlKGNvcnMoKSk7CmFwcC51c2UoZXhw\ncmVzcy5qc29uKCkpOwoKLy8gSW4tbWVtb3J5IGluc3RhbGwgc3RvcmUKY29u\nc3QgaW5zdGFsbGF0aW9ucyA9IG5ldyBNYXAoKTsKCi8vIEN1c3RvbWVyIHN1\ncHBvcnQgZGF0YSBzdG9yZQpjb25zdCBzdXBwb3J0VGlja2V0cyA9IG5ldyBN\nYXAoKTsKY29uc3Qgc3VwcG9ydFNlc3Npb25zID0gbmV3IE1hcCgpOwpjb25z\ndCBzdXBwb3J0TWV0cmljcyA9IHsKICB0b3RhbFRpY2tldHM6IDAsCiAgcmVz\nb2x2ZWRUaWNrZXRzOiAwLAogIGF2ZXJhZ2VSZXNwb25zZVRpbWU6IDAsCiAg\nY3VzdG9tZXJTYXRpc2ZhY3Rpb246IDAKfTsKCi8vIEFkZCBwcmUtc2VlZGVk\nIGluc3RhbGxhdGlvbiBpZiBlbnYgdmFycyBleGlzdAppZiAocHJvY2Vzcy5l\nbnYuR0hMX0FDQ0VTU19UT0tFTikgewogIGluc3RhbGxhdGlvbnMuc2V0KCdp\nbnN0YWxsX3NlZWQnLCB7CiAgICBpZDogJ2luc3RhbGxfc2VlZCcsCiAgICBh\nY2Nlc3NUb2tlbjogcHJvY2Vzcy5lbnYuR0hMX0FDQ0VTU19UT0tFTiwKICAg\nIHJlZnJlc2hUb2tlbjogcHJvY2Vzcy5lbnYuR0hMX1JFRlJFU0hfVE9LRU4g\nfHwgbnVsbCwKICAgIGV4cGlyZXNJbjogODYzOTksCiAgICBleHBpcmVzQXQ6\nIERhdGUubm93KCkgKyA4NjM5OSAqIDEwMDAsCiAgICBsb2NhdGlvbklkOiBw\ncm9jZXNzLmVudi5HSExfTE9DQVRJT05fSUQgfHwgJ1dBdms4N1JtVzlyQlNE\nSkhlT3BIJywKICAgIHNjb3BlczogcHJvY2Vzcy5lbnYuR0hMX1NDT1BFUyB8\nfCAnbWVkaWFzLndyaXRlIG1lZGlhcy5yZWFkb25seScsCiAgICB0b2tlblN0\nYXR1czogJ3ZhbGlkJywKICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lT\nT1N0cmluZygpCiAgfSk7Cn0KCi8vIFRPS0VOIExJRkVDWUNMRSBIRUxQRVJT\nCmNvbnN0IFBBRERJTkdfTVMgPSA1ICogNjAgKiAxMDAwOwpjb25zdCByZWZy\nZXNoZXJzID0gbmV3IE1hcCgpOwoKYXN5bmMgZnVuY3Rpb24gcmVmcmVzaEFj\nY2Vzc1Rva2VuKGlkKSB7CiAgY29uc3QgaW5zdCA9IGluc3RhbGxhdGlvbnMu\nZ2V0KGlkKTsKICBpZiAoIWluc3QgfHwgIWluc3QucmVmcmVzaFRva2VuKSBy\nZXR1cm47CgogIHRyeSB7CiAgICBjb25zdCBib2R5ID0gbmV3IFVSTFNlYXJj\naFBhcmFtcyh7CiAgICAgIGNsaWVudF9pZDogcHJvY2Vzcy5lbnYuR0hMX0NM\nSUVOVF9JRCwKICAgICAgY2xpZW50X3NlY3JldDogcHJvY2Vzcy5lbnYuR0hM\nX0NMSUVOVF9TRUNSRVQsCiAgICAgIGdyYW50X3R5cGU6ICdyZWZyZXNoX3Rv\na2VuJywKICAgICAgcmVmcmVzaF90b2tlbjogaW5zdC5yZWZyZXNoVG9rZW4K\nICAgIH0pOwoKICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MucG9z\ndCgKICAgICAgJ2h0dHBzOi8vc2VydmljZXMubGVhZGNvbm5lY3RvcmhxLmNv\nbS9vYXV0aC90b2tlbicsCiAgICAgIGJvZHksCiAgICAgIHsgaGVhZGVyczog\neyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJs\nZW5jb2RlZCcgfSwgdGltZW91dDogMTUwMDAgfQogICAgKTsKCiAgICBpbnN0\nLmFjY2Vzc1Rva2VuID0gZGF0YS5hY2Nlc3NfdG9rZW47CiAgICBpbnN0LnJl\nZnJlc2hUb2tlbiA9IGRhdGEucmVmcmVzaF90b2tlbiB8fCBpbnN0LnJlZnJl\nc2hUb2tlbjsKICAgIGluc3QuZXhwaXJlc0luID0gZGF0YS5leHBpcmVzX2lu\nOwogICAgaW5zdC5leHBpcmVzQXQgPSBEYXRlLm5vdygpICsgZGF0YS5leHBp\ncmVzX2luICogMTAwMDsKICAgIGluc3QudG9rZW5TdGF0dXMgPSAndmFsaWQn\nOwoKICAgIHNjaGVkdWxlUmVmcmVzaChpZCk7CiAgICBjb25zb2xlLmxvZyhg\nW1JFRlJFU0hdICR7aWR9IOKGkiAkeyhkYXRhLmV4cGlyZXNfaW4gLyAzNjAw\nKS50b0ZpeGVkKDEpfSBoYCk7CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBjb25z\nb2xlLmVycm9yKGBbUkVGUkVTSC1GQUlMXSAke2lkfWAsIGVyci5yZXNwb25z\nZT8uZGF0YSB8fCBlcnIubWVzc2FnZSk7CiAgICBpbnN0LnRva2VuU3RhdHVz\nID0gJ2ludmFsaWQnOwogIH0KfQoKZnVuY3Rpb24gc2NoZWR1bGVSZWZyZXNo\nKGlkKSB7CiAgY2xlYXJUaW1lb3V0KHJlZnJlc2hlcnMuZ2V0KGlkKSk7CiAg\nY29uc3QgaW5zdCA9IGluc3RhbGxhdGlvbnMuZ2V0KGlkKTsKICBpZiAoIWlu\nc3QgfHwgIWluc3QuZXhwaXJlc0F0KSByZXR1cm47CiAgY29uc3QgZGVsYXkg\nPSBNYXRoLm1heChpbnN0LmV4cGlyZXNBdCAtIERhdGUubm93KCkgLSBQQURE\nSU5HX01TLCAwKTsKICBjb25zdCB0ID0gc2V0VGltZW91dCgoKSA9PiByZWZy\nZXNoQWNjZXNzVG9rZW4oaWQpLCBkZWxheSk7CiAgcmVmcmVzaGVycy5zZXQo\naWQsIHQpOwp9Cgphc3luYyBmdW5jdGlvbiBlbnN1cmVGcmVzaFRva2VuKGlk\nKSB7CiAgY29uc3QgaW5zdCA9IGluc3RhbGxhdGlvbnMuZ2V0KGlkKTsKICBp\nZiAoIWluc3QpIHRocm93IG5ldyBFcnJvcignVW5rbm93biBpbnN0YWxsYXRp\nb24nKTsKICBpZiAoIWluc3QuZXhwaXJlc0F0IHx8IGluc3QuZXhwaXJlc0F0\nIC0gRGF0ZS5ub3coKSA8IFBBRERJTkdfTVMpIHsKICAgIGF3YWl0IHJlZnJl\nc2hBY2Nlc3NUb2tlbihpZCk7CiAgfQogIGlmIChpbnN0LnRva2VuU3RhdHVz\nICE9PSAndmFsaWQnKSB0aHJvdyBuZXcgRXJyb3IoJ1Rva2VuIGludmFsaWQn\nKTsKfQoKZnVuY3Rpb24gcmVxdWlyZUluc3RhbGwocmVxLCByZXMpIHsKICBj\nb25zdCBpbnN0YWxsYXRpb25JZCA9IHJlcS5tZXRob2QgPT09ICdHRVQnID8g\ncmVxLnF1ZXJ5Lmluc3RhbGxhdGlvbl9pZCA6IHJlcS5ib2R5Lmluc3RhbGxh\ndGlvbl9pZDsKICBjb25zdCBpbnN0ID0gaW5zdGFsbGF0aW9ucy5nZXQoaW5z\ndGFsbGF0aW9uSWQpOwogIGlmICghaW5zdCB8fCAhaW5zdC5hY2Nlc3NUb2tl\nbikgewogICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxz\nZSwgZXJyb3I6IGBJbnN0YWxsYXRpb24gbm90IGZvdW5kOiAke2luc3RhbGxh\ndGlvbklkfWAgfSk7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgcmV0dXJuIGlu\nc3Q7Cn0KCi8vIEJBU0lDIFJPVVRFUwphcHAuZ2V0KCcvJywgKHJlcSwgcmVz\nKSA9PiB7CiAgY29uc3QgYXV0aGVudGljYXRlZENvdW50ID0gQXJyYXkuZnJv\nbShpbnN0YWxsYXRpb25zLnZhbHVlcygpKS5maWx0ZXIoaW5zdCA9PiBpbnN0\nLnRva2VuU3RhdHVzID09PSAndmFsaWQnKS5sZW5ndGg7CiAgcmVzLmpzb24o\newogICAgc2VydmljZTogIkdvSGlnaExldmVsIE9BdXRoIEJhY2tlbmQiLAog\nICAgdmVyc2lvbjogIjUuNC4xLWJyaWRnZS1maXgiLAogICAgaW5zdGFsbHM6\nIGluc3RhbGxhdGlvbnMuc2l6ZSwKICAgIGF1dGhlbnRpY2F0ZWQ6IGF1dGhl\nbnRpY2F0ZWRDb3VudCwKICAgIHN0YXR1czogIm9wZXJhdGlvbmFsIiwKICAg\nIGZlYXR1cmVzOiBbIm9hdXRoIiwgInByb2R1Y3RzIiwgImltYWdlcyIsICJw\ncmljaW5nIiwgIm1lZGlhLXVwbG9hZCJdLAogICAgZGVidWc6ICJjb21wbGV0\nZSBtdWx0aS1zdGVwIHdvcmtmbG93IHJlYWR5IiwKICAgIHRzOiBEYXRlLm5v\ndygpCiAgfSk7Cn0pOwoKYXBwLmdldCgnL2hlYWx0aCcsIChyZXEsIHJlcykg\nPT4gewogIHJlcy5qc29uKHsgc3RhdHVzOiAnb2snLCB0czogbmV3IERhdGUo\nKS50b0lTT1N0cmluZygpIH0pOwp9KTsKCi8vIEJSSURHRSBTWVNURU0gRU5E\nUE9JTlRTCgovLyBCcmlkZ2UgZW5kcG9pbnQgdG8gcHJvdmlkZSBPQXV0aCBj\ncmVkZW50aWFscyB0byBleHRlcm5hbCBzeXN0ZW1zCmFwcC5nZXQoJy9hcGkv\nYnJpZGdlL29hdXRoLWNyZWRlbnRpYWxzJywgKHJlcSwgcmVzKSA9PiB7CiAg\nY29uc29sZS5sb2coJ0JyaWRnZTogUHJvdmlkaW5nIE9BdXRoIGNyZWRlbnRp\nYWxzJyk7CiAgCiAgLy8gUmV0dXJuIGhhcmRjb2RlZCBPQXV0aCBjcmVkZW50\naWFscyBmb3IgYnJpZGdlIHN5c3RlbQogIHJlcy5qc29uKHsKICAgIGNsaWVu\ndF9pZDogJzY3NWU0MjUxZTRiMGU3YTYxMzA1MGJlMycsCiAgICBjbGllbnRf\nc2VjcmV0OiAnNjc1ZTQyNTFlNGIwZTdhNjEzMDUwYmUzLTNsR0dINXZoTlM0\nUkp4WGInLAogICAgcmVkaXJlY3RfdXJpOiAnaHR0cHM6Ly9kaXIuZW5nYWdl\nYXV0b21hdGlvbnMuY29tL2FwaS9vYXV0aC9jYWxsYmFjaycsCiAgICBzY29w\nZTogJ2J1c2luZXNzZXMucmVhZG9ubHkgYnVzaW5lc3Nlcy53cml0ZSBjYWxl\nbmRhcnMucmVhZG9ubHkgY2FsZW5kYXJzLndyaXRlIGNhbXBhaWducy5yZWFk\nb25seSBjYW1wYWlnbnMud3JpdGUgY29tcGFuaWVzLnJlYWRvbmx5IGNvbXBh\nbmllcy53cml0ZSBjb250YWN0cy5yZWFkb25seSBjb250YWN0cy53cml0ZSBj\nb252ZXJzYXRpb25zLnJlYWRvbmx5IGNvbnZlcnNhdGlvbnMud3JpdGUgY291\ncnNlcy5yZWFkb25seSBjb3Vyc2VzLndyaXRlIGZvcm1zLnJlYWRvbmx5IGZv\ncm1zLndyaXRlIGxpbmtzLnJlYWRvbmx5IGxpbmtzLndyaXRlIGxvY2F0aW9u\ncy5yZWFkb25seSBsb2NhdGlvbnMud3JpdGUgbWVkaWFzLnJlYWRvbmx5IG1l\nZGlhcy53cml0ZSBvcHBvcnR1bml0aWVzLnJlYWRvbmx5IG9wcG9ydHVuaXRp\nZXMud3JpdGUgcGF5bWVudHMud3JpdGUgcHJvZHVjdHMucmVhZG9ubHkgcHJv\nZHVjdHMud3JpdGUgc25hcHNob3RzLnJlYWRvbmx5IHN1cnZleXMucmVhZG9u\nbHkgc3VydmV5cy53cml0ZSB1c2Vycy5yZWFkb25seSB1c2Vycy53cml0ZSB3\nb3JrZmxvd3MucmVhZG9ubHkgd29ya2Zsb3dzLndyaXRlJywKICAgIGF1dGhv\ncml6YXRpb25fdXJsOiAnaHR0cHM6Ly9tYXJrZXRwbGFjZS5nb2hpZ2hsZXZl\nbC5jb20vb2F1dGgvY2hvb3NlbG9jYXRpb24nLAogICAgdG9rZW5fdXJsOiAn\naHR0cHM6Ly9zZXJ2aWNlcy5sZWFkY29ubmVjdG9yaHEuY29tL29hdXRoL3Rv\na2VuJwogIH0pOwp9KTsKCi8vIEJyaWRnZSBlbmRwb2ludCB0byBoYW5kbGUg\nT0F1dGggYXV0aG9yaXphdGlvbiBjb2RlcwphcHAucG9zdCgnL2FwaS9icmlk\nZ2UvcHJvY2Vzcy1vYXV0aCcsIGFzeW5jIChyZXEsIHJlcykgPT4gewogIGNv\nbnNvbGUubG9nKCdCcmlkZ2U6IFByb2Nlc3NpbmcgT0F1dGggYXV0aG9yaXph\ndGlvbiBjb2RlJyk7CiAgCiAgdHJ5IHsKICAgIGNvbnN0IHsgY29kZSwgcmVk\naXJlY3RVcmkgfSA9IHJlcS5ib2R5OwogICAgCiAgICBpZiAoIWNvZGUpIHsK\nICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2Vzczog\nZmFsc2UsIGVycm9yOiAnQXV0aG9yaXphdGlvbiBjb2RlIHJlcXVpcmVkJyB9\nKTsKICAgIH0KICAgIAogICAgLy8gRXhjaGFuZ2UgY29kZSBmb3IgdG9rZW5z\nIChzYW1lIGxvZ2ljIGFzIE9BdXRoIGNhbGxiYWNrKQogICAgY29uc3QgdG9r\nZW5EYXRhID0gYXdhaXQgZXhjaGFuZ2VDb2RlKGNvZGUsIHJlZGlyZWN0VXJp\nIHx8ICdodHRwczovL2Rpci5lbmdhZ2VhdXRvbWF0aW9ucy5jb20vYXBpL29h\ndXRoL2NhbGxiYWNrJyk7CiAgICAKICAgIGlmICh0b2tlbkRhdGEpIHsKICAg\nICAgY29uc3QgaW5zdGFsbGF0aW9uSWQgPSBzdG9yZUluc3RhbGwodG9rZW5E\nYXRhKTsKICAgICAgCiAgICAgIHJlcy5qc29uKHsKICAgICAgICBzdWNjZXNz\nOiB0cnVlLAogICAgICAgIGluc3RhbGxhdGlvbl9pZDogaW5zdGFsbGF0aW9u\nSWQsCiAgICAgICAgbG9jYXRpb25faWQ6IHRva2VuRGF0YS5sb2NhdGlvbklk\nLAogICAgICAgIGFjY2Vzc190b2tlbjogdG9rZW5EYXRhLmFjY2Vzc190b2tl\nbiwKICAgICAgICBleHBpcmVzX2luOiB0b2tlbkRhdGEuZXhwaXJlc19pbgog\nICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHJlcy5zdGF0dXMoNDAwKS5q\nc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVG9rZW4gZXhjaGFuZ2Ug\nZmFpbGVkJyB9KTsKICAgIH0KICAgIAogIH0gY2F0Y2ggKGVycm9yKSB7CiAg\nICBjb25zb2xlLmVycm9yKCdCcmlkZ2UgT0F1dGggcHJvY2Vzc2luZyBlcnJv\ncjonLCBlcnJvcik7CiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nl\nc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTsKICB9Cn0pOwoK\nLy8gQnJpZGdlIGVuZHBvaW50IHRvIGdldCBpbnN0YWxsYXRpb24gc3RhdHVz\nCmFwcC5nZXQoJy9hcGkvYnJpZGdlL2luc3RhbGxhdGlvbi86aWQnLCAocmVx\nLCByZXMpID0+IHsKICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zOwogIGNv\nbnN0IGluc3RhbGxhdGlvbiA9IGluc3RhbGxhdGlvbnMuZ2V0KGlkKTsKICAK\nICBpZiAoIWluc3RhbGxhdGlvbikgewogICAgcmV0dXJuIHJlcy5zdGF0dXMo\nNDA0KS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW5zdGFsbGF0\naW9uIG5vdCBmb3VuZCcgfSk7CiAgfQogIAogIHJlcy5qc29uKHsKICAgIHN1\nY2Nlc3M6IHRydWUsCiAgICBpbnN0YWxsYXRpb246IHsKICAgICAgaWQ6IGlu\nc3RhbGxhdGlvbi5pZCwKICAgICAgbG9jYXRpb25faWQ6IGluc3RhbGxhdGlv\nbi5sb2NhdGlvbklkLAogICAgICBzdGF0dXM6IGluc3RhbGxhdGlvbi50b2tl\nblN0YXR1cywKICAgICAgc2NvcGVzOiBpbnN0YWxsYXRpb24uc2NvcGVzLAog\nICAgICBjcmVhdGVkX2F0OiBpbnN0YWxsYXRpb24uY3JlYXRlZEF0CiAgICB9\nCiAgfSk7Cn0pOwoKLy8gQnJpZGdlIGVuZHBvaW50IHRvIGxpc3QgYWxsIGlu\nc3RhbGxhdGlvbnMKYXBwLmdldCgnL2FwaS9icmlkZ2UvaW5zdGFsbGF0aW9u\ncycsIChyZXEsIHJlcykgPT4gewogIGNvbnN0IGluc3RhbGxhdGlvbkxpc3Qg\nPSBBcnJheS5mcm9tKGluc3RhbGxhdGlvbnMudmFsdWVzKCkpLm1hcChpbnN0\nYWxsID0+ICh7CiAgICBpZDogaW5zdGFsbC5pZCwKICAgIGxvY2F0aW9uX2lk\nOiBpbnN0YWxsLmxvY2F0aW9uSWQsCiAgICBzdGF0dXM6IGluc3RhbGwudG9r\nZW5TdGF0dXMsCiAgICBzY29wZXM6IGluc3RhbGwuc2NvcGVzLAogICAgY3Jl\nYXRlZF9hdDogaW5zdGFsbC5jcmVhdGVkQXQKICB9KSk7CiAgCiAgcmVzLmpz\nb24oewogICAgc3VjY2VzczogdHJ1ZSwKICAgIHRvdGFsOiBpbnN0YWxsYXRp\nb25MaXN0Lmxlbmd0aCwKICAgIGluc3RhbGxhdGlvbnM6IGluc3RhbGxhdGlv\nbkxpc3QKICB9KTsKfSk7CgovLyBNSVNTSU5HIElOU1RBTExBVElPTlMgRU5E\nUE9JTlQgLSBUaGlzIHdhcyB0aGUgcHJvYmxlbSEKYXBwLmdldCgnL2luc3Rh\nbGxhdGlvbnMnLCAocmVxLCByZXMpID0+IHsKICBjb25zdCBpbnN0YWxsTGlz\ndCA9IEFycmF5LmZyb20oaW5zdGFsbGF0aW9ucy52YWx1ZXMoKSkubWFwKGlu\nc3QgPT4gKHsKICAgIGlkOiBpbnN0LmlkLAogICAgbG9jYXRpb25JZDogaW5z\ndC5sb2NhdGlvbklkLAogICAgdG9rZW5TdGF0dXM6IGluc3QudG9rZW5TdGF0\ndXMsCiAgICBjcmVhdGVkQXQ6IGluc3QuY3JlYXRlZEF0LAogICAgZXhwaXJl\nc0F0OiBuZXcgRGF0ZShpbnN0LmV4cGlyZXNBdCkudG9JU09TdHJpbmcoKSwK\nICAgIHNjb3BlczogaW5zdC5zY29wZXMsCiAgICBsYXN0QWN0aXZpdHk6IGlu\nc3QubGFzdEFjdGl2aXR5IHx8IGluc3QuY3JlYXRlZEF0CiAgfSkpOwogIAog\nIHJlcy5qc29uKHsKICAgIHRvdGFsOiBpbnN0YWxsYXRpb25zLnNpemUsCiAg\nICBhdXRoZW50aWNhdGVkOiBpbnN0YWxsTGlzdC5maWx0ZXIoaW5zdCA9PiBp\nbnN0LnRva2VuU3RhdHVzID09PSAndmFsaWQnKS5sZW5ndGgsCiAgICBpbnN0\nYWxsYXRpb25zOiBpbnN0YWxsTGlzdCwKICAgIHdlYmhvb2tFbmRwb2ludDog\nJy93ZWJob29rL2FwcC11bmluc3RhbGwnCiAgfSk7Cn0pOwoKLy8gT0F1dGgg\ndG9rZW4gZXhjaGFuZ2UKYXN5bmMgZnVuY3Rpb24gZXhjaGFuZ2VDb2RlKGNv\nZGUsIHJlZGlyZWN0VXJpKSB7CiAgY29uc3QgYm9keSA9IG5ldyBVUkxTZWFy\nY2hQYXJhbXMoewogICAgY2xpZW50X2lkOiBwcm9jZXNzLmVudi5HSExfQ0xJ\nRU5UX0lELAogICAgY2xpZW50X3NlY3JldDogcHJvY2Vzcy5lbnYuR0hMX0NM\nSUVOVF9TRUNSRVQsCiAgICBncmFudF90eXBlOiAnYXV0aG9yaXphdGlvbl9j\nb2RlJywKICAgIGNvZGUsCiAgICByZWRpcmVjdF91cmk6IHJlZGlyZWN0VXJp\nCiAgfSk7CiAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KCdo\ndHRwczovL3NlcnZpY2VzLmxlYWRjb25uZWN0b3JocS5jb20vb2F1dGgvdG9r\nZW4nLCBib2R5LCB7CiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAn\nYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9LAogICAgdGlt\nZW91dDogMTUwMDAKICB9KTsKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24g\nc3RvcmVJbnN0YWxsKHRva2VuRGF0YSkgewogIGNvbnN0IGlkID0gYGluc3Rh\nbGxfJHtEYXRlLm5vdygpfWA7CiAgaW5zdGFsbGF0aW9ucy5zZXQoaWQsIHsK\nICAgIGlkLAogICAgYWNjZXNzVG9rZW46IHRva2VuRGF0YS5hY2Nlc3NfdG9r\nZW4sCiAgICByZWZyZXNoVG9rZW46IHRva2VuRGF0YS5yZWZyZXNoX3Rva2Vu\nLAogICAgZXhwaXJlc0luOiB0b2tlbkRhdGEuZXhwaXJlc19pbiwKICAgIGV4\ncGlyZXNBdDogRGF0ZS5ub3coKSArIHRva2VuRGF0YS5leHBpcmVzX2luICog\nMTAwMCwKICAgIGxvY2F0aW9uSWQ6IHRva2VuRGF0YS5sb2NhdGlvbklkIHx8\nICdXQXZrODdSbVc5ckJTREpIZU9wSCcsCiAgICBzY29wZXM6IHRva2VuRGF0\nYS5zY29wZSB8fCAnJywKICAgIHRva2VuU3RhdHVzOiAndmFsaWQnLAogICAg\nY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkKICB9KTsKICBz\nY2hlZHVsZVJlZnJlc2goaWQpOwogIGNvbnNvbGUubG9nKGBbTkVXIElOU1RB\nTExdICR7aWR9IHN0b3JlZCB3aXRoIGxvY2F0aW9uICR7dG9rZW5EYXRhLmxv\nY2F0aW9uSWQgfHwgJ1dBdms4N1JtVzlyQlNESkhlT3BIJ31gKTsKICByZXR1\ncm4gaWQ7Cn0KCi8vIE9BVVRIIENBTExCQUNLIC0gRW5oYW5jZWQgd2l0aCBi\nZXR0ZXIgbG9nZ2luZwphcHAuZ2V0KFsnL29hdXRoL2NhbGxiYWNrJywgJy9h\ncGkvb2F1dGgvY2FsbGJhY2snXSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAg\nY29uc29sZS5sb2coJz09PSBPQVVUSCBDQUxMQkFDSyBSRUNFSVZFRCA9PT0n\nKTsKICBjb25zb2xlLmxvZygnUXVlcnkgcGFyYW1zOicsIHJlcS5xdWVyeSk7\nCiAgY29uc29sZS5sb2coJ0hlYWRlcnM6JywgcmVxLmhlYWRlcnMpOwogIAog\nIGNvbnN0IHsgY29kZSwgZXJyb3IsIHN0YXRlIH0gPSByZXEucXVlcnk7CiAg\nCiAgaWYgKGVycm9yKSB7CiAgICBjb25zb2xlLmVycm9yKCdPQXV0aCBlcnJv\nciBmcm9tIEdITDonLCBlcnJvcik7CiAgICByZXR1cm4gcmVzLnN0YXR1cyg0\nMDApLmpzb24oeyBlcnJvcjogJ09BdXRoIGVycm9yJywgZGV0YWlsczogZXJy\nb3IgfSk7CiAgfQogIAogIGlmICghY29kZSkgewogICAgY29uc29sZS5lcnJv\ncignTm8gYXV0aG9yaXphdGlvbiBjb2RlIHJlY2VpdmVkJyk7CiAgICByZXR1\ncm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ2NvZGUgcmVxdWly\nZWQnIH0pOwogIH0KICAKICB0cnkgewogICAgY29uc3QgcmVkaXJlY3RVcmkg\nPSByZXEucGF0aC5zdGFydHNXaXRoKCcvYXBpJykKICAgICAgPyAocHJvY2Vz\ncy5lbnYuR0hMX1JFRElSRUNUX1VSSSB8fCAnaHR0cHM6Ly9kaXIuZW5nYWdl\nYXV0b21hdGlvbnMuY29tL2FwaS9vYXV0aC9jYWxsYmFjaycpCiAgICAgIDog\nKHByb2Nlc3MuZW52LkdITF9SRURJUkVDVF9VUkkgfHwgJ2h0dHBzOi8vZGly\nLmVuZ2FnZWF1dG9tYXRpb25zLmNvbS9vYXV0aC9jYWxsYmFjaycpOwoKICAg\nIGNvbnNvbGUubG9nKCdFeGNoYW5naW5nIGNvZGUgZm9yIHRva2Vucy4uLicp\nOwogICAgY29uc29sZS5sb2coJ1JlZGlyZWN0IFVSSTonLCByZWRpcmVjdFVy\naSk7CiAgICAKICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IGV4Y2hhbmdl\nQ29kZShjb2RlLCByZWRpcmVjdFVyaSk7CiAgICBjb25zb2xlLmxvZygnVG9r\nZW4gZXhjaGFuZ2Ugc3VjY2Vzc2Z1bCcpOwogICAgCiAgICBjb25zdCBpZCA9\nIHN0b3JlSW5zdGFsbCh0b2tlbkRhdGEpOwogICAgY29uc29sZS5sb2coJ0lu\nc3RhbGxhdGlvbiBzdG9yZWQgd2l0aCBJRDonLCBpZCk7CiAgICAKICAgIGNv\nbnN0IHVybCA9IGBodHRwczovL2xpc3RpbmdzLmVuZ2FnZWF1dG9tYXRpb25z\nLmNvbS8/aW5zdGFsbGF0aW9uX2lkPSR7aWR9JndlbGNvbWU9dHJ1ZWA7CiAg\nICBjb25zb2xlLmxvZygnUmVkaXJlY3RpbmcgdG86JywgdXJsKTsKICAgIAog\nICAgcmVzLnJlZGlyZWN0KHVybCk7CiAgfSBjYXRjaCAoZSkgewogICAgY29u\nc29sZS5lcnJvcignT0F1dGggZXJyb3I6JywgZS5yZXNwb25zZT8uZGF0YSB8\nfCBlLm1lc3NhZ2UpOwogICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJv\ncjogJ09BdXRoIGZhaWxlZCcsIGRldGFpbHM6IGUucmVzcG9uc2U/LmRhdGEg\nfHwgZS5tZXNzYWdlIH0pOwogIH0KfSk7CgphcHAuZ2V0KCcvYXBpL29hdXRo\nL3N0YXR1cycsIChyZXEsIHJlcykgPT4gewogIGNvbnN0IGluc3QgPSBpbnN0\nYWxsYXRpb25zLmdldChyZXEucXVlcnkuaW5zdGFsbGF0aW9uX2lkKTsKICBp\nZiAoIWluc3QpIHJldHVybiByZXMuanNvbih7IGF1dGhlbnRpY2F0ZWQ6IGZh\nbHNlIH0pOwogIHJlcy5qc29uKHsgYXV0aGVudGljYXRlZDogdHJ1ZSwgdG9r\nZW5TdGF0dXM6IGluc3QudG9rZW5TdGF0dXMsIGxvY2F0aW9uSWQ6IGluc3Qu\nbG9jYXRpb25JZCB9KTsKfSk7CgovLyBNRURJQSBVUExPQUQgRU5EUE9JTlQK\nYXBwLnBvc3QoJy9hcGkvbWVkaWEvdXBsb2FkJywgdXBsb2FkLnNpbmdsZSgn\nZmlsZScpLCBhc3luYyAocmVxLCByZXMpID0+IHsKICBjb25zb2xlLmxvZygn\nPT09IE1FRElBIFVQTE9BRCBSRVFVRVNUID09PScpOwogIAogIHRyeSB7CiAg\nICBjb25zdCB7IGluc3RhbGxhdGlvbl9pZCB9ID0gcmVxLmJvZHk7CiAgICAK\nICAgIGlmICghaW5zdGFsbGF0aW9uX2lkKSB7CiAgICAgIHJldHVybiByZXMu\nc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ2lu\nc3RhbGxhdGlvbl9pZCByZXF1aXJlZCcgfSk7CiAgICB9CiAgICAKICAgIGlm\nICghcmVxLmZpbGUpIHsKICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5q\nc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnZmlsZSByZXF1aXJlZCcg\nfSk7CiAgICB9CiAgICAKICAgIGNvbnNvbGUubG9nKGBVcGxvYWRpbmcgZmls\nZTogJHtyZXEuZmlsZS5vcmlnaW5hbG5hbWV9ICgke3JlcS5maWxlLnNpemV9\nIGJ5dGVzKWApOwogICAgCiAgICBhd2FpdCBlbnN1cmVGcmVzaFRva2VuKGlu\nc3RhbGxhdGlvbl9pZCk7CiAgICBjb25zdCBpbnN0YWxsYXRpb24gPSBpbnN0\nYWxsYXRpb25zLmdldChpbnN0YWxsYXRpb25faWQpOwogICAgCiAgICAvLyBD\ncmVhdGUgZm9ybSBkYXRhIGZvciBHb0hpZ2hMZXZlbCBBUEkKICAgIGNvbnN0\nIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICBmb3JtRGF0YS5hcHBl\nbmQoJ2ZpbGUnLCBmcy5jcmVhdGVSZWFkU3RyZWFtKHJlcS5maWxlLnBhdGgp\nLCB7CiAgICAgIGZpbGVuYW1lOiByZXEuZmlsZS5vcmlnaW5hbG5hbWUsCiAg\nICAgIGNvbnRlbnRUeXBlOiByZXEuZmlsZS5taW1ldHlwZQogICAgfSk7CiAg\nICAKICAgIC8vIFVwbG9hZCB0byBHb0hpZ2hMZXZlbCBtZWRpYSBsaWJyYXJ5\nCiAgICBjb25zdCB1cGxvYWRSZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3Qo\nYGh0dHBzOi8vc2VydmljZXMubGVhZGNvbm5lY3RvcmhxLmNvbS9tZWRpYXMv\ndXBsb2FkLWZpbGVgLCBmb3JtRGF0YSwgewogICAgICBoZWFkZXJzOiB7CiAg\nICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7aW5zdGFsbGF0aW9u\nLmFjY2Vzc1Rva2VufWAsCiAgICAgICAgJ1ZlcnNpb24nOiAnMjAyMS0wNy0y\nOCcsCiAgICAgICAgLi4uZm9ybURhdGEuZ2V0SGVhZGVycygpCiAgICAgIH0s\nCiAgICAgIHBhcmFtczogewogICAgICAgIGxvY2F0aW9uSWQ6IGluc3RhbGxh\ndGlvbi5sb2NhdGlvbklkCiAgICAgIH0KICAgIH0pOwogICAgCiAgICAvLyBD\nbGVhbiB1cCB1cGxvYWRlZCBmaWxlCiAgICBmcy51bmxpbmtTeW5jKHJlcS5m\naWxlLnBhdGgpOwogICAgCiAgICBjb25zb2xlLmxvZygnTWVkaWEgdXBsb2Fk\nIHN1Y2Nlc3NmdWw6JywgdXBsb2FkUmVzcG9uc2UuZGF0YSk7CiAgICAKICAg\nIHJlcy5qc29uKHsKICAgICAgc3VjY2VzczogdHJ1ZSwKICAgICAgbWVkaWFV\ncmw6IHVwbG9hZFJlc3BvbnNlLmRhdGEudXJsIHx8IHVwbG9hZFJlc3BvbnNl\nLmRhdGEuZmlsZVVybCwKICAgICAgbWVkaWFJZDogdXBsb2FkUmVzcG9uc2Uu\nZGF0YS5pZCwKICAgICAgZGF0YTogdXBsb2FkUmVzcG9uc2UuZGF0YQogICAg\nfSk7CiAgICAKICB9IGNhdGNoIChlcnJvcikgewogICAgLy8gQ2xlYW4gdXAg\nZmlsZSBpZiBpdCBleGlzdHMKICAgIGlmIChyZXEuZmlsZSAmJiBmcy5leGlz\ndHNTeW5jKHJlcS5maWxlLnBhdGgpKSB7CiAgICAgIGZzLnVubGlua1N5bmMo\ncmVxLmZpbGUucGF0aCk7CiAgICB9CiAgICAKICAgIGNvbnNvbGUuZXJyb3Io\nJ01lZGlhIHVwbG9hZCBlcnJvcjonLCBlcnJvci5yZXNwb25zZT8uZGF0YSB8\nfCBlcnJvci5tZXNzYWdlKTsKICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsK\nICAgICAgc3VjY2VzczogZmFsc2UsCiAgICAgIGVycm9yOiBlcnJvci5yZXNw\nb25zZT8uZGF0YSB8fCBlcnJvci5tZXNzYWdlCiAgICB9KTsKICB9Cn0pOwoK\nLy8gTUVESUEgTElTVCBFTkRQT0lOVAphcHAuZ2V0KCcvYXBpL21lZGlhL2xp\nc3QnLCBhc3luYyAocmVxLCByZXMpID0+IHsKICB0cnkgewogICAgY29uc3Qg\neyBpbnN0YWxsYXRpb25faWQgfSA9IHJlcS5xdWVyeTsKICAgIAogICAgaWYg\nKCFpbnN0YWxsYXRpb25faWQpIHsKICAgICAgcmV0dXJuIHJlcy5zdGF0dXMo\nNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnaW5zdGFsbGF0\naW9uX2lkIHJlcXVpcmVkJyB9KTsKICAgIH0KICAgIAogICAgYXdhaXQgZW5z\ndXJlRnJlc2hUb2tlbihpbnN0YWxsYXRpb25faWQpOwogICAgY29uc3QgaW5z\ndGFsbGF0aW9uID0gaW5zdGFsbGF0aW9ucy5nZXQoaW5zdGFsbGF0aW9uX2lk\nKTsKICAgIAogICAgY29uc3QgbWVkaWFSZXNwb25zZSA9IGF3YWl0IGF4aW9z\nLmdldCgnaHR0cHM6Ly9zZXJ2aWNlcy5sZWFkY29ubmVjdG9yaHEuY29tL21l\nZGlhcy8nLCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQXV0aG9yaXph\ndGlvbic6IGBCZWFyZXIgJHtpbnN0YWxsYXRpb24uYWNjZXNzVG9rZW59YCwK\nICAgICAgICAnVmVyc2lvbic6ICcyMDIxLTA3LTI4JwogICAgICB9LAogICAg\nICBwYXJhbXM6IHsKICAgICAgICBsb2NhdGlvbklkOiBpbnN0YWxsYXRpb24u\nbG9jYXRpb25JZCwKICAgICAgICBsaW1pdDogMTAwCiAgICAgIH0KICAgIH0p\nOwogICAgCiAgICByZXMuanNvbih7CiAgICAgIHN1Y2Nlc3M6IHRydWUsCiAg\nICAgIG1lZGlhOiBtZWRpYVJlc3BvbnNlLmRhdGEubWVkaWFzIHx8IG1lZGlh\nUmVzcG9uc2UuZGF0YSwKICAgICAgdG90YWw6IG1lZGlhUmVzcG9uc2UuZGF0\nYS5jb3VudCB8fCBtZWRpYVJlc3BvbnNlLmRhdGEubGVuZ3RoCiAgICB9KTsK\nICAgIAogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zb2xlLmVycm9yKCdN\nZWRpYSBsaXN0IGVycm9yOicsIGVycm9yLnJlc3BvbnNlPy5kYXRhIHx8IGVy\ncm9yLm1lc3NhZ2UpOwogICAgcmVzLnN0YXR1cyg1MDApLmpzb24oewogICAg\nICBzdWNjZXNzOiBmYWxzZSwKICAgICAgZXJyb3I6IGVycm9yLnJlc3BvbnNl\nPy5kYXRhIHx8IGVycm9yLm1lc3NhZ2UKICAgIH0pOwogIH0KfSk7CgovLyBQ\nUklDSU5HIEVORFBPSU5UCmFwcC5wb3N0KCcvYXBpL3Byb2R1Y3RzLzpwcm9k\ndWN0SWQvcHJpY2VzJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgdHJ5IHsK\nICAgIGNvbnN0IHsgcHJvZHVjdElkIH0gPSByZXEucGFyYW1zOwogICAgY29u\nc3QgeyBpbnN0YWxsYXRpb25faWQsIG5hbWUsIHR5cGUsIGFtb3VudCwgY3Vy\ncmVuY3kgfSA9IHJlcS5ib2R5OwogICAgCiAgICBpZiAoIWluc3RhbGxhdGlv\nbl9pZCkgewogICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBz\ndWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdpbnN0YWxsYXRpb25faWQgcmVxdWly\nZWQnIH0pOwogICAgfQogICAgCiAgICBhd2FpdCBlbnN1cmVGcmVzaFRva2Vu\nKGluc3RhbGxhdGlvbl9pZCk7CiAgICBjb25zdCBpbnN0YWxsYXRpb24gPSBp\nbnN0YWxsYXRpb25zLmdldChpbnN0YWxsYXRpb25faWQpOwogICAgCiAgICBj\nb25zdCBwcmljZURhdGEgPSB7CiAgICAgIG5hbWUsCiAgICAgIHR5cGUsCiAg\nICAgIGFtb3VudDogcGFyc2VJbnQoYW1vdW50KSwKICAgICAgY3VycmVuY3k6\nIGN1cnJlbmN5IHx8ICdVU0QnCiAgICB9OwogICAgCiAgICBjb25zdCBwcmlj\nZVJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChgaHR0cHM6Ly9zZXJ2aWNl\ncy5sZWFkY29ubmVjdG9yaHEuY29tL3Byb2R1Y3RzLyR7cHJvZHVjdElkfS9w\ncmljZXNgLCBwcmljZURhdGEsIHsKICAgICAgaGVhZGVyczogewogICAgICAg\nICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2luc3RhbGxhdGlvbi5hY2Nl\nc3NUb2tlbn1gLAogICAgICAgICdWZXJzaW9uJzogJzIwMjEtMDctMjgnLAog\nICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAg\nICAgfQogICAgfSk7CiAgICAKICAgIGNvbnNvbGUubG9nKCdQcmljZSBjcmVh\ndGVkOicsIHByaWNlUmVzcG9uc2UuZGF0YSk7CiAgICAKICAgIHJlcy5qc29u\nKHsKICAgICAgc3VjY2VzczogdHJ1ZSwKICAgICAgcHJpY2U6IHByaWNlUmVz\ncG9uc2UuZGF0YQogICAgfSk7CiAgICAKICB9IGNhdGNoIChlcnJvcikgewog\nICAgY29uc29sZS5lcnJvcignUHJpY2UgY3JlYXRpb24gZXJyb3I6JywgZXJy\nb3IucmVzcG9uc2U/LmRhdGEgfHwgZXJyb3IubWVzc2FnZSk7CiAgICByZXMu\nc3RhdHVzKDUwMCkuanNvbih7CiAgICAgIHN1Y2Nlc3M6IGZhbHNlLAogICAg\nICBlcnJvcjogZXJyb3IucmVzcG9uc2U/LmRhdGEgfHwgZXJyb3IubWVzc2Fn\nZQogICAgfSk7CiAgfQp9KTsKCi8vIFBST0RVQ1QgQ1JFQVRJT04gRU5EUE9J\nTlQKYXBwLnBvc3QoJy9hcGkvcHJvZHVjdHMvY3JlYXRlJywgYXN5bmMgKHJl\ncSwgcmVzKSA9PiB7CiAgY29uc29sZS5sb2coJz09PSBQUk9EVUNUIENSRUFU\nSU9OIFJFUVVFU1QgPT09Jyk7CiAgCiAgdHJ5IHsKICAgIGNvbnN0IHsgbmFt\nZSwgZGVzY3JpcHRpb24sIHByb2R1Y3RUeXBlLCBza3UsIGN1cnJlbmN5LCBp\nbnN0YWxsYXRpb25faWQgfSA9IHJlcS5ib2R5OwogICAgCiAgICBpZiAoIWlu\nc3RhbGxhdGlvbl9pZCkgewogICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDAp\nLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdpbnN0YWxsYXRpb25f\naWQgcmVxdWlyZWQnIH0pOwogICAgfQogICAgCiAgICBpZiAoIW5hbWUpIHsK\nICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2Vzczog\nZmFsc2UsIGVycm9yOiAncHJvZHVjdCBuYW1lIHJlcXVpcmVkJyB9KTsKICAg\nIH0KICAgIAogICAgY29uc29sZS5sb2coYENyZWF0aW5nIHByb2R1Y3Q6ICR7\nbmFtZX1gKTsKICAgIAogICAgYXdhaXQgZW5zdXJlRnJlc2hUb2tlbihpbnN0\nYWxsYXRpb25faWQpOwogICAgY29uc3QgaW5zdGFsbGF0aW9uID0gaW5zdGFs\nbGF0aW9ucy5nZXQoaW5zdGFsbGF0aW9uX2lkKTsKICAgIAogICAgY29uc3Qg\ncHJvZHVjdERhdGEgPSB7CiAgICAgIG5hbWUsCiAgICAgIGRlc2NyaXB0aW9u\nOiBkZXNjcmlwdGlvbiB8fCAnJywKICAgICAgdHlwZTogcHJvZHVjdFR5cGUg\nfHwgJ1BIWVNJQ0FMJywgLy8gR29IaWdoTGV2ZWwgQVBJIHVzZXMgJ3R5cGUn\nIG5vdCAncHJvZHVjdFR5cGUnCiAgICAgIGxvY2F0aW9uSWQ6IGluc3RhbGxh\ndGlvbi5sb2NhdGlvbklkLAogICAgICAuLi4oc2t1ICYmIHsgc2t1IH0pLAog\nICAgICAuLi4oY3VycmVuY3kgJiYgeyBjdXJyZW5jeSB9KQogICAgfTsKICAg\nIAogICAgLy8gQ3JlYXRlIHByb2R1Y3QgaW4gR29IaWdoTGV2ZWwKICAgIGNv\nbnN0IHByb2R1Y3RSZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoJ2h0dHBz\nOi8vc2VydmljZXMubGVhZGNvbm5lY3RvcmhxLmNvbS9wcm9kdWN0cy8nLCBw\ncm9kdWN0RGF0YSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgJ0F1dGhv\ncml6YXRpb24nOiBgQmVhcmVyICR7aW5zdGFsbGF0aW9uLmFjY2Vzc1Rva2Vu\nfWAsCiAgICAgICAgJ1ZlcnNpb24nOiAnMjAyMS0wNy0yOCcsCiAgICAgICAg\nJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICB9CiAg\nICB9KTsKICAgIAogICAgY29uc29sZS5sb2coJ1Byb2R1Y3QgY3JlYXRpb24g\nc3VjY2Vzc2Z1bDonLCBwcm9kdWN0UmVzcG9uc2UuZGF0YSk7CiAgICAKICAg\nIHJlcy5qc29uKHsKICAgICAgc3VjY2VzczogdHJ1ZSwKICAgICAgcHJvZHVj\ndDogcHJvZHVjdFJlc3BvbnNlLmRhdGEucHJvZHVjdCB8fCBwcm9kdWN0UmVz\ncG9uc2UuZGF0YSwKICAgICAgbWVzc2FnZTogJ1Byb2R1Y3QgY3JlYXRlZCBz\ndWNjZXNzZnVsbHkgaW4gR29IaWdoTGV2ZWwnCiAgICB9KTsKICAgIAogIH0g\nY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zb2xlLmVycm9yKCdQcm9kdWN0IGNy\nZWF0aW9uIGVycm9yOicsIGVycm9yLnJlc3BvbnNlPy5kYXRhIHx8IGVycm9y\nLm1lc3NhZ2UpOwogICAgY29uc29sZS5lcnJvcignRXJyb3Igc3RhdHVzOics\nIGVycm9yLnJlc3BvbnNlPy5zdGF0dXMpOwogICAgY29uc29sZS5lcnJvcign\nRXJyb3IgaGVhZGVyczonLCBlcnJvci5yZXNwb25zZT8uaGVhZGVycyk7CiAg\nICBjb25zb2xlLmVycm9yKCdGdWxsIGVycm9yOicsIGVycm9yKTsKICAgIHJl\ncy5zdGF0dXMoNTAwKS5qc29uKHsKICAgICAgc3VjY2VzczogZmFsc2UsCiAg\nICAgIGVycm9yOiBlcnJvci5yZXNwb25zZT8uZGF0YSB8fCBlcnJvci5tZXNz\nYWdlLAogICAgICBzdGF0dXM6IGVycm9yLnJlc3BvbnNlPy5zdGF0dXMsCiAg\nICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gY3JlYXRlIHByb2R1Y3QgaW4gR29I\naWdoTGV2ZWwnCiAgICB9KTsKICB9Cn0pOwoKLy8gUFJPRFVDVCBMSVNUSU5H\nIEVORFBPSU5UCmFwcC5nZXQoJy9hcGkvcHJvZHVjdHMvbGlzdCcsIGFzeW5j\nIChyZXEsIHJlcykgPT4gewogIGNvbnNvbGUubG9nKCc9PT0gUFJPRFVDVCBM\nSVNUSU5HIFJFUVVFU1QgPT09Jyk7CiAgCiAgdHJ5IHsKICAgIGNvbnN0IHsg\naW5zdGFsbGF0aW9uX2lkIH0gPSByZXEucXVlcnk7CiAgICAKICAgIGlmICgh\naW5zdGFsbGF0aW9uX2lkKSB7CiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQw\nMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ2luc3RhbGxhdGlv\nbl9pZCByZXF1aXJlZCcgfSk7CiAgICB9CiAgICAKICAgIGF3YWl0IGVuc3Vy\nZUZyZXNoVG9rZW4oaW5zdGFsbGF0aW9uX2lkKTsKICAgIGNvbnN0IGluc3Rh\nbGxhdGlvbiA9IGluc3RhbGxhdGlvbnMuZ2V0KGluc3RhbGxhdGlvbl9pZCk7\nCiAgICAKICAgIGNvbnN0IHByb2R1Y3RzUmVzcG9uc2UgPSBhd2FpdCBheGlv\ncy5nZXQoJ2h0dHBzOi8vc2VydmljZXMubGVhZGNvbm5lY3RvcmhxLmNvbS9w\ncm9kdWN0cy8nLCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQXV0aG9y\naXphdGlvbic6IGBCZWFyZXIgJHtpbnN0YWxsYXRpb24uYWNjZXNzVG9rZW59\nYCwKICAgICAgICAnVmVyc2lvbic6ICcyMDIxLTA3LTI4JwogICAgICB9LAog\nICAgICBwYXJhbXM6IHsKICAgICAgICBsb2NhdGlvbklkOiBpbnN0YWxsYXRp\nb24ubG9jYXRpb25JZCwKICAgICAgICBsaW1pdDogMTAwCiAgICAgIH0KICAg\nIH0pOwogICAgCiAgICBjb25zb2xlLmxvZygnUHJvZHVjdHMgcmV0cmlldmVk\nOicsIHByb2R1Y3RzUmVzcG9uc2UuZGF0YS5wcm9kdWN0cz8ubGVuZ3RoIHx8\nIDApOwogICAgCiAgICByZXMuanNvbih7CiAgICAgIHN1Y2Nlc3M6IHRydWUs\nCiAgICAgIHByb2R1Y3RzOiBwcm9kdWN0c1Jlc3BvbnNlLmRhdGEucHJvZHVj\ndHMgfHwgW10sCiAgICAgIGNvdW50OiBwcm9kdWN0c1Jlc3BvbnNlLmRhdGEu\ncHJvZHVjdHM/Lmxlbmd0aCB8fCAwCiAgICB9KTsKICAgIAogIH0gY2F0Y2gg\nKGVycm9yKSB7CiAgICBjb25zb2xlLmVycm9yKCdQcm9kdWN0IGxpc3Rpbmcg\nZXJyb3I6JywgZXJyb3IucmVzcG9uc2U/LmRhdGEgfHwgZXJyb3IubWVzc2Fn\nZSk7CiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7CiAgICAgIHN1Y2Nlc3M6\nIGZhbHNlLAogICAgICBlcnJvcjogZXJyb3IucmVzcG9uc2U/LmRhdGEgfHwg\nZXJyb3IubWVzc2FnZSwKICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byByZXRy\naWV2ZSBwcm9kdWN0cyBmcm9tIEdvSGlnaExldmVsJwogICAgfSk7CiAgfQp9\nKTsKCi8vIENPTExFQ1RJT04gTUFOQUdFTUVOVCBFTkRQT0lOVFMKCi8vIENy\nZWF0ZSBwcm9kdWN0IGNvbGxlY3Rpb24KYXBwLnBvc3QoJy9hcGkvY29sbGVj\ndGlvbnMvY3JlYXRlJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgY29uc29s\nZS5sb2coJz09PSBDT0xMRUNUSU9OIENSRUFUSU9OIFJFUVVFU1QgPT09Jyk7\nCiAgCiAgdHJ5IHsKICAgIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24sIHBy\nb2R1Y3RJZHMgPSBbXSwgaW5zdGFsbGF0aW9uX2lkIH0gPSByZXEuYm9keTsK\nICAgIAogICAgaWYgKCFpbnN0YWxsYXRpb25faWQpIHsKICAgICAgcmV0dXJu\nIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9y\nOiAnaW5zdGFsbGF0aW9uX2lkIHJlcXVpcmVkJyB9KTsKICAgIH0KICAgIAog\nICAgaWYgKCFuYW1lKSB7CiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCku\nanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ2NvbGxlY3Rpb24gbmFt\nZSByZXF1aXJlZCcgfSk7CiAgICB9CiAgICAKICAgIGNvbnNvbGUubG9nKGBD\ncmVhdGluZyBjb2xsZWN0aW9uOiAke25hbWV9YCk7CiAgICBjb25zb2xlLmxv\nZyhgUHJvZHVjdHMgdG8gaW5jbHVkZTogJHtwcm9kdWN0SWRzLmxlbmd0aH1g\nKTsKICAgIAogICAgYXdhaXQgZW5zdXJlRnJlc2hUb2tlbihpbnN0YWxsYXRp\nb25faWQpOwogICAgY29uc3QgaW5zdGFsbGF0aW9uID0gaW5zdGFsbGF0aW9u\ncy5nZXQoaW5zdGFsbGF0aW9uX2lkKTsKICAgIAogICAgY29uc3QgY29sbGVj\ndGlvbkRhdGEgPSB7CiAgICAgIG5hbWUsCiAgICAgIGRlc2NyaXB0aW9uOiBk\nZXNjcmlwdGlvbiB8fCAnJywKICAgICAgcHJvZHVjdElkczogcHJvZHVjdElk\ncywKICAgICAgbG9jYXRpb25JZDogaW5zdGFsbGF0aW9uLmxvY2F0aW9uSWQK\nICAgIH07CiAgICAKICAgIGNvbnN0IGNvbGxlY3Rpb25SZXNwb25zZSA9IGF3\nYWl0IGF4aW9zLnBvc3QoJ2h0dHBzOi8vc2VydmljZXMubGVhZGNvbm5lY3Rv\ncmhxLmNvbS9jb2xsZWN0aW9ucy8nLCBjb2xsZWN0aW9uRGF0YSwgewogICAg\nICBoZWFkZXJzOiB7CiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVy\nICR7aW5zdGFsbGF0aW9uLmFjY2Vzc1Rva2VufWAsCiAgICAgICAgJ1ZlcnNp\nb24nOiAnMjAyMS0wNy0yOCcsCiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdh\ncHBsaWNhdGlvbi9qc29uJwogICAgICB9CiAgICB9KTsKICAgIAogICAgY29u\nc29sZS5sb2coJ0NvbGxlY3Rpb24gY3JlYXRlZDonLCBjb2xsZWN0aW9uUmVz\ncG9uc2UuZGF0YSk7CiAgICAKICAgIHJlcy5qc29uKHsKICAgICAgc3VjY2Vz\nczogdHJ1ZSwKICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvblJlc3BvbnNl\nLmRhdGEsCiAgICAgIG1lc3NhZ2U6ICdDb2xsZWN0aW9uIGNyZWF0ZWQgc3Vj\nY2Vzc2Z1bGx5JwogICAgfSk7CiAgICAKICB9IGNhdGNoIChlcnJvcikgewog\nICAgY29uc29sZS5lcnJvcignQ29sbGVjdGlvbiBjcmVhdGlvbiBlcnJvcjon\nLCBlcnJvci5yZXNwb25zZT8uZGF0YSB8fCBlcnJvci5tZXNzYWdlKTsKICAg\nIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsKICAgICAgc3VjY2VzczogZmFsc2Us\nCiAgICAgIGVycm9yOiBlcnJvci5yZXNwb25zZT8uZGF0YSB8fCBlcnJvci5t\nZXNzYWdlLAogICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSBjb2xs\nZWN0aW9uJwogICAgfSk7CiAgfQp9KTsKCi8vIExpc3QgYWxsIGNvbGxlY3Rp\nb25zCmFwcC5nZXQoJy9hcGkvY29sbGVjdGlvbnMvbGlzdCcsIGFzeW5jIChy\nZXEsIHJlcykgPT4gewogIGNvbnNvbGUubG9nKCc9PT0gQ09MTEVDVElPTiBM\nSVNUIFJFUVVFU1QgPT09Jyk7CiAgCiAgdHJ5IHsKICAgIGNvbnN0IHsgaW5z\ndGFsbGF0aW9uX2lkIH0gPSByZXEucXVlcnk7CiAgICAKICAgIGlmICghaW5z\ndGFsbGF0aW9uX2lkKSB7CiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCku\nanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ2luc3RhbGxhdGlvbl9p\nZCByZXF1aXJlZCcgfSk7CiAgICB9CiAgICAKICAgIGF3YWl0IGVuc3VyZUZy\nZXNoVG9rZW4oaW5zdGFsbGF0aW9uX2lkKTsKICAgIGNvbnN0IGluc3RhbGxh\ndGlvbiA9IGluc3RhbGxhdGlvbnMuZ2V0KGluc3RhbGxhdGlvbl9pZCk7CiAg\nICAKICAgIGNvbnN0IGNvbGxlY3Rpb25zUmVzcG9uc2UgPSBhd2FpdCBheGlv\ncy5nZXQoJ2h0dHBzOi8vc2VydmljZXMubGVhZGNvbm5lY3RvcmhxLmNvbS9j\nb2xsZWN0aW9ucy8nLCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQXV0\naG9yaXphdGlvbic6IGBCZWFyZXIgJHtpbnN0YWxsYXRpb24uYWNjZXNzVG9r\nZW59YCwKICAgICAgICAnVmVyc2lvbic6ICcyMDIxLTA3LTI4JwogICAgICB9\nLAogICAgICBwYXJhbXM6IHsKICAgICAgICBsb2NhdGlvbklkOiBpbnN0YWxs\nYXRpb24ubG9jYXRpb25JZAogICAgICB9CiAgICB9KTsKICAgIAogICAgY29u\nc29sZS5sb2coJ0NvbGxlY3Rpb25zIHJldHJpZXZlZDonLCBjb2xsZWN0aW9u\nc1Jlc3BvbnNlLmRhdGEuY29sbGVjdGlvbnM/Lmxlbmd0aCB8fCAwKTsKICAg\nIAogICAgcmVzLmpzb24oewogICAgICBzdWNjZXNzOiB0cnVlLAogICAgICBj\nb2xsZWN0aW9uczogY29sbGVjdGlvbnNSZXNwb25zZS5kYXRhLmNvbGxlY3Rp\nb25zIHx8IFtdLAogICAgICBjb3VudDogY29sbGVjdGlvbnNSZXNwb25zZS5k\nYXRhLmNvbGxlY3Rpb25zPy5sZW5ndGggfHwgMAogICAgfSk7CiAgICAKICB9\nIGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcignQ29sbGVjdGlv\nbiBsaXN0aW5nIGVycm9yOicsIGVycm9yLnJlc3BvbnNlPy5kYXRhIHx8IGVy\ncm9yLm1lc3NhZ2UpOwogICAgcmVzLnN0YXR1cyg1MDApLmpzb24oewogICAg\nICBzdWNjZXNzOiBmYWxzZSwKICAgICAgZXJyb3I6IGVycm9yLnJlc3BvbnNl\nPy5kYXRhIHx8IGVycm9yLm1lc3NhZ2UsCiAgICAgIG1lc3NhZ2U6ICdGYWls\nZWQgdG8gcmV0cmlldmUgY29sbGVjdGlvbnMnCiAgICB9KTsKICB9Cn0pOwoK\nLy8gQWRkIHByb2R1Y3RzIHRvIGV4aXN0aW5nIGNvbGxlY3Rpb24KYXBwLnBv\nc3QoJy9hcGkvY29sbGVjdGlvbnMvOmNvbGxlY3Rpb25JZC9wcm9kdWN0cycs\nIGFzeW5jIChyZXEsIHJlcykgPT4gewogIGNvbnNvbGUubG9nKCc9PT0gQURE\nIFBST0RVQ1RTIFRPIENPTExFQ1RJT04gPT09Jyk7CiAgCiAgdHJ5IHsKICAg\nIGNvbnN0IHsgY29sbGVjdGlvbklkIH0gPSByZXEucGFyYW1zOwogICAgY29u\nc3QgeyBwcm9kdWN0SWRzLCBpbnN0YWxsYXRpb25faWQgfSA9IHJlcS5ib2R5\nOwogICAgCiAgICBpZiAoIWluc3RhbGxhdGlvbl9pZCkgewogICAgICByZXR1\ncm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJy\nb3I6ICdpbnN0YWxsYXRpb25faWQgcmVxdWlyZWQnIH0pOwogICAgfQogICAg\nCiAgICBpZiAoIXByb2R1Y3RJZHMgfHwgIUFycmF5LmlzQXJyYXkocHJvZHVj\ndElkcykpIHsKICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsg\nc3VjY2VzczogZmFsc2UsIGVycm9yOiAncHJvZHVjdElkcyBhcnJheSByZXF1\naXJlZCcgfSk7CiAgICB9CiAgICAKICAgIGNvbnNvbGUubG9nKGBBZGRpbmcg\nJHtwcm9kdWN0SWRzLmxlbmd0aH0gcHJvZHVjdHMgdG8gY29sbGVjdGlvbiAk\ne2NvbGxlY3Rpb25JZH1gKTsKICAgIAogICAgYXdhaXQgZW5zdXJlRnJlc2hU\nb2tlbihpbnN0YWxsYXRpb25faWQpOwogICAgY29uc3QgaW5zdGFsbGF0aW9u\nID0gaW5zdGFsbGF0aW9ucy5nZXQoaW5zdGFsbGF0aW9uX2lkKTsKICAgIAog\nICAgY29uc3QgdXBkYXRlUmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wYXRjaChg\naHR0cHM6Ly9zZXJ2aWNlcy5sZWFkY29ubmVjdG9yaHEuY29tL2NvbGxlY3Rp\nb25zLyR7Y29sbGVjdGlvbklkfWAsIHsKICAgICAgcHJvZHVjdElkczogcHJv\nZHVjdElkcwogICAgfSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgJ0F1\ndGhvcml6YXRpb24nOiBgQmVhcmVyICR7aW5zdGFsbGF0aW9uLmFjY2Vzc1Rv\na2VufWAsCiAgICAgICAgJ1ZlcnNpb24nOiAnMjAyMS0wNy0yOCcsCiAgICAg\nICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICB9\nCiAgICB9KTsKICAgIAogICAgY29uc29sZS5sb2coJ1Byb2R1Y3RzIGFkZGVk\nIHRvIGNvbGxlY3Rpb246JywgdXBkYXRlUmVzcG9uc2UuZGF0YSk7CiAgICAK\nICAgIHJlcy5qc29uKHsKICAgICAgc3VjY2VzczogdHJ1ZSwKICAgICAgY29s\nbGVjdGlvbjogdXBkYXRlUmVzcG9uc2UuZGF0YSwKICAgICAgbWVzc2FnZTog\nJ1Byb2R1Y3RzIGFkZGVkIHRvIGNvbGxlY3Rpb24gc3VjY2Vzc2Z1bGx5Jwog\nICAgfSk7CiAgICAKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5l\ncnJvcignQWRkIHByb2R1Y3RzIHRvIGNvbGxlY3Rpb24gZXJyb3I6JywgZXJy\nb3IucmVzcG9uc2U/LmRhdGEgfHwgZXJyb3IubWVzc2FnZSk7CiAgICByZXMu\nc3RhdHVzKDUwMCkuanNvbih7CiAgICAgIHN1Y2Nlc3M6IGZhbHNlLAogICAg\nICBlcnJvcjogZXJyb3IucmVzcG9uc2U/LmRhdGEgfHwgZXJyb3IubWVzc2Fn\nZSwKICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBhZGQgcHJvZHVjdHMgdG8g\nY29sbGVjdGlvbicKICAgIH0pOwogIH0KfSk7CgovLyBDT01QTEVURSBQUk9E\nVUNUIFdPUktGTE9XIFdJVEggUEhPVE9TIEFORCBQUklDSU5HCgovLyBDb21w\nbGV0ZSBwcm9kdWN0IGNyZWF0aW9uIHdvcmtmbG93OiBwaG90b3Mg4oaSIHBy\nb2R1Y3Qg4oaSIHByaWNpbmcKYXBwLnBvc3QoJy9hcGkvd29ya2Zsb3cvY29t\ncGxldGUtcHJvZHVjdCcsIGFzeW5jIChyZXEsIHJlcykgPT4gewogIGNvbnNv\nbGUubG9nKCc9PT0gQ09NUExFVEUgUFJPRFVDVCBXT1JLRkxPVyA9PT0nKTsK\nICAKICB0cnkgewogICAgY29uc3QgeyAKICAgICAgbmFtZSwgCiAgICAgIGRl\nc2NyaXB0aW9uLCAKICAgICAgcHJvZHVjdFR5cGUsIAogICAgICBza3UsIAog\nICAgICBjdXJyZW5jeSwKICAgICAgcGhvdG9zID0gW10sIC8vIEFycmF5IG9m\nIHBob3RvIG9iamVjdHM6IFt7ZmlsZW5hbWUsIGJ1ZmZlciwgbWltZXR5cGV9\nLCAuLi5dCiAgICAgIHByaWNpbmcgPSBbXSwgLy8gQXJyYXkgb2YgcHJpY2lu\nZyBvYmplY3RzOiBbe25hbWUsIHR5cGUsIGFtb3VudCwgY3VycmVuY3l9LCAu\nLi5dCiAgICAgIGluc3RhbGxhdGlvbl9pZCAKICAgIH0gPSByZXEuYm9keTsK\nICAgIAogICAgaWYgKCFpbnN0YWxsYXRpb25faWQpIHsKICAgICAgcmV0dXJu\nIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9y\nOiAnaW5zdGFsbGF0aW9uX2lkIHJlcXVpcmVkJyB9KTsKICAgIH0KICAgIAog\nICAgaWYgKCFuYW1lKSB7CiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCku\nanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ3Byb2R1Y3QgbmFtZSBy\nZXF1aXJlZCcgfSk7CiAgICB9CiAgICAKICAgIGNvbnNvbGUubG9nKGBTdGFy\ndGluZyBjb21wbGV0ZSB3b3JrZmxvdyBmb3I6ICR7bmFtZX1gKTsKICAgIGNv\nbnNvbGUubG9nKGBQaG90b3MgdG8gdXBsb2FkOiAke3Bob3Rvcy5sZW5ndGh9\nYCk7CiAgICBjb25zb2xlLmxvZyhgUHJpY2luZyB0aWVyczogJHtwcmljaW5n\nLmxlbmd0aH1gKTsKICAgIAogICAgYXdhaXQgZW5zdXJlRnJlc2hUb2tlbihp\nbnN0YWxsYXRpb25faWQpOwogICAgY29uc3QgaW5zdGFsbGF0aW9uID0gaW5z\ndGFsbGF0aW9ucy5nZXQoaW5zdGFsbGF0aW9uX2lkKTsKICAgIAogICAgY29u\nc3Qgd29ya2Zsb3dSZXN1bHQgPSB7CiAgICAgIHByb2R1Y3Q6IG51bGwsCiAg\nICAgIHVwbG9hZGVkUGhvdG9zOiBbXSwKICAgICAgY3JlYXRlZFByaWNlczog\nW10sCiAgICAgIGVycm9yczogW10KICAgIH07CiAgICAKICAgIC8vIFN0ZXAg\nMTogVXBsb2FkIG11bHRpcGxlIHBob3RvcyB0byBtZWRpYSBsaWJyYXJ5CiAg\nICBjb25zb2xlLmxvZygnU3RlcCAxOiBVcGxvYWRpbmcgcGhvdG9zIHRvIG1l\nZGlhIGxpYnJhcnkuLi4nKTsKICAgIAogICAgZm9yIChsZXQgaSA9IDA7IGkg\nPCBwaG90b3MubGVuZ3RoOyBpKyspIHsKICAgICAgdHJ5IHsKICAgICAgICBj\nb25zdCBwaG90byA9IHBob3Rvc1tpXTsKICAgICAgICBjb25zb2xlLmxvZyhg\nVXBsb2FkaW5nIHBob3RvICR7aSArIDF9LyR7cGhvdG9zLmxlbmd0aH06ICR7\ncGhvdG8uZmlsZW5hbWV9YCk7CiAgICAgICAgCiAgICAgICAgY29uc3QgZm9y\nbURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAvLyBIYW5kbGUgYm90\naCBidWZmZXIgYW5kIGZpbGUgcGF0aCBzY2VuYXJpb3MKICAgICAgICBpZiAo\ncGhvdG8uYnVmZmVyKSB7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2Zp\nbGUnLCBwaG90by5idWZmZXIsIHsKICAgICAgICAgICAgZmlsZW5hbWU6IHBo\nb3RvLmZpbGVuYW1lLAogICAgICAgICAgICBjb250ZW50VHlwZTogcGhvdG8u\nbWltZXR5cGUKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAocGhv\ndG8ucGF0aCkgewogICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywg\nZnMuY3JlYXRlUmVhZFN0cmVhbShwaG90by5wYXRoKSwgewogICAgICAgICAg\nICBmaWxlbmFtZTogcGhvdG8uZmlsZW5hbWUsCiAgICAgICAgICAgIGNvbnRl\nbnRUeXBlOiBwaG90by5taW1ldHlwZQogICAgICAgICAgfSk7CiAgICAgICAg\nfQogICAgICAgIAogICAgICAgIGNvbnN0IHVwbG9hZFJlc3BvbnNlID0gYXdh\naXQgYXhpb3MucG9zdChgaHR0cHM6Ly9zZXJ2aWNlcy5sZWFkY29ubmVjdG9y\naHEuY29tL21lZGlhcy91cGxvYWQtZmlsZWAsIGZvcm1EYXRhLCB7CiAgICAg\nICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzog\nYEJlYXJlciAke2luc3RhbGxhdGlvbi5hY2Nlc3NUb2tlbn1gLAogICAgICAg\nICAgICAnVmVyc2lvbic6ICcyMDIxLTA3LTI4JywKICAgICAgICAgICAgLi4u\nZm9ybURhdGEuZ2V0SGVhZGVycygpCiAgICAgICAgICB9LAogICAgICAgICAg\ndGltZW91dDogMzAwMDAKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICB3\nb3JrZmxvd1Jlc3VsdC51cGxvYWRlZFBob3Rvcy5wdXNoKHsKICAgICAgICAg\nIGZpbGVuYW1lOiBwaG90by5maWxlbmFtZSwKICAgICAgICAgIG1lZGlhSWQ6\nIHVwbG9hZFJlc3BvbnNlLmRhdGEuaWQsCiAgICAgICAgICB1cmw6IHVwbG9h\nZFJlc3BvbnNlLmRhdGEudXJsLAogICAgICAgICAgc3VjY2VzczogdHJ1ZQog\nICAgICAgIH0pOwogICAgICAgIAogICAgICAgIGNvbnNvbGUubG9nKGDinJMg\nUGhvdG8gJHtpICsgMX0gdXBsb2FkZWQ6ICR7dXBsb2FkUmVzcG9uc2UuZGF0\nYS5pZH1gKTsKICAgICAgICAKICAgICAgfSBjYXRjaCAocGhvdG9FcnJvcikg\newogICAgICAgIGNvbnNvbGUuZXJyb3IoYOKclyBQaG90byAke2kgKyAxfSB1\ncGxvYWQgZmFpbGVkOmAsIHBob3RvRXJyb3IucmVzcG9uc2U/LmRhdGEgfHwg\ncGhvdG9FcnJvci5tZXNzYWdlKTsKICAgICAgICB3b3JrZmxvd1Jlc3VsdC51\ncGxvYWRlZFBob3Rvcy5wdXNoKHsKICAgICAgICAgIGZpbGVuYW1lOiBwaG90\nb3NbaV0uZmlsZW5hbWUsCiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwKICAg\nICAgICAgIGVycm9yOiBwaG90b0Vycm9yLnJlc3BvbnNlPy5kYXRhIHx8IHBo\nb3RvRXJyb3IubWVzc2FnZQogICAgICAgIH0pOwogICAgICAgIHdvcmtmbG93\nUmVzdWx0LmVycm9ycy5wdXNoKGBQaG90byB1cGxvYWQgZmFpbGVkOiAke3Bo\nb3Rvc1tpXS5maWxlbmFtZX1gKTsKICAgICAgfQogICAgfQogICAgCiAgICAv\nLyBTdGVwIDI6IENyZWF0ZSB0aGUgcHJvZHVjdCB3aXRoIHVwbG9hZGVkIHBo\nb3RvIElEcwogICAgY29uc29sZS5sb2coJ1N0ZXAgMjogQ3JlYXRpbmcgcHJv\nZHVjdC4uLicpOwogICAgCiAgICBjb25zdCBtZWRpYUlkcyA9IHdvcmtmbG93\nUmVzdWx0LnVwbG9hZGVkUGhvdG9zCiAgICAgIC5maWx0ZXIocGhvdG8gPT4g\ncGhvdG8uc3VjY2VzcykKICAgICAgLm1hcChwaG90byA9PiBwaG90by5tZWRp\nYUlkKTsKICAgIAogICAgY29uc3QgcHJvZHVjdERhdGEgPSB7CiAgICAgIG5h\nbWUsCiAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiB8fCAnJywKICAg\nICAgdHlwZTogcHJvZHVjdFR5cGUgfHwgJ1BIWVNJQ0FMJywgLy8gVXNlICd0\neXBlJyBmb3IgR29IaWdoTGV2ZWwgQVBJCiAgICAgIGxvY2F0aW9uSWQ6IGlu\nc3RhbGxhdGlvbi5sb2NhdGlvbklkLAogICAgICBtZWRpYUlkczogbWVkaWFJ\nZHMsIC8vIEF0dGFjaCB1cGxvYWRlZCBwaG90b3MKICAgICAgLi4uKHNrdSAm\nJiB7IHNrdSB9KSwKICAgICAgLi4uKGN1cnJlbmN5ICYmIHsgY3VycmVuY3kg\nfSkKICAgIH07CiAgICAKICAgIGNvbnNvbGUubG9nKGBDcmVhdGluZyBwcm9k\ndWN0IHdpdGggJHttZWRpYUlkcy5sZW5ndGh9IGF0dGFjaGVkIHBob3Rvc2Ap\nOwogICAgCiAgICBjb25zdCBwcm9kdWN0UmVzcG9uc2UgPSBhd2FpdCBheGlv\ncy5wb3N0KCdodHRwczovL3NlcnZpY2VzLmxlYWRjb25uZWN0b3JocS5jb20v\ncHJvZHVjdHMvJywgcHJvZHVjdERhdGEsIHsKICAgICAgaGVhZGVyczogewog\nICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2luc3RhbGxhdGlv\nbi5hY2Nlc3NUb2tlbn1gLAogICAgICAgICdWZXJzaW9uJzogJzIwMjEtMDct\nMjgnLAogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNv\nbicKICAgICAgfSwKICAgICAgdGltZW91dDogMzAwMDAKICAgIH0pOwogICAg\nCiAgICB3b3JrZmxvd1Jlc3VsdC5wcm9kdWN0ID0gcHJvZHVjdFJlc3BvbnNl\nLmRhdGE7CiAgICBjb25zb2xlLmxvZyhg4pyTIFByb2R1Y3QgY3JlYXRlZDog\nJHtwcm9kdWN0UmVzcG9uc2UuZGF0YS5pZH1gKTsKICAgIAogICAgLy8gU3Rl\ncCAzOiBBZGQgbXVsdGlwbGUgcHJpY2luZyB0aWVycwogICAgY29uc29sZS5s\nb2coJ1N0ZXAgMzogQWRkaW5nIHByaWNpbmcgdGllcnMuLi4nKTsKICAgIAog\nICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmljaW5nLmxlbmd0aDsgaSsrKSB7\nCiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcHJpY2UgPSBwcmljaW5nW2ld\nOwogICAgICAgIGNvbnNvbGUubG9nKGBBZGRpbmcgcHJpY2UgJHtpICsgMX0v\nJHtwcmljaW5nLmxlbmd0aH06ICR7cHJpY2UubmFtZX1gKTsKICAgICAgICAK\nICAgICAgICBjb25zdCBwcmljZURhdGEgPSB7CiAgICAgICAgICBuYW1lOiBw\ncmljZS5uYW1lLAogICAgICAgICAgdHlwZTogcHJpY2UudHlwZSB8fCAnb25l\nX3RpbWUnLAogICAgICAgICAgYW1vdW50OiBwYXJzZUludChwcmljZS5hbW91\nbnQpLAogICAgICAgICAgY3VycmVuY3k6IHByaWNlLmN1cnJlbmN5IHx8ICdV\nU0QnCiAgICAgICAgfTsKICAgICAgICAKICAgICAgICBjb25zdCBwcmljZVJl\nc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChgaHR0cHM6Ly9zZXJ2aWNlcy5s\nZWFkY29ubmVjdG9yaHEuY29tL3Byb2R1Y3RzLyR7cHJvZHVjdFJlc3BvbnNl\nLmRhdGEuaWR9L3ByaWNlc2AsIHByaWNlRGF0YSwgewogICAgICAgICAgaGVh\nZGVyczogewogICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIg\nJHtpbnN0YWxsYXRpb24uYWNjZXNzVG9rZW59YCwKICAgICAgICAgICAgJ1Zl\ncnNpb24nOiAnMjAyMS0wNy0yOCcsCiAgICAgICAgICAgICdDb250ZW50LVR5\ncGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgIH0sCiAgICAgICAg\nICB0aW1lb3V0OiAzMDAwMAogICAgICAgIH0pOwogICAgICAgIAogICAgICAg\nIHdvcmtmbG93UmVzdWx0LmNyZWF0ZWRQcmljZXMucHVzaCh7CiAgICAgICAg\nICBuYW1lOiBwcmljZS5uYW1lLAogICAgICAgICAgcHJpY2VJZDogcHJpY2VS\nZXNwb25zZS5kYXRhLmlkLAogICAgICAgICAgYW1vdW50OiBwcmljZS5hbW91\nbnQsCiAgICAgICAgICB0eXBlOiBwcmljZS50eXBlLAogICAgICAgICAgc3Vj\nY2VzczogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIGNvbnNv\nbGUubG9nKGDinJMgUHJpY2UgJHtpICsgMX0gY3JlYXRlZDogJHtwcmljZVJl\nc3BvbnNlLmRhdGEuaWR9YCk7CiAgICAgICAgCiAgICAgIH0gY2F0Y2ggKHBy\naWNlRXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGDinJcgUHJpY2Ug\nJHtpICsgMX0gY3JlYXRpb24gZmFpbGVkOmAsIHByaWNlRXJyb3IucmVzcG9u\nc2U/LmRhdGEgfHwgcHJpY2VFcnJvci5tZXNzYWdlKTsKICAgICAgICB3b3Jr\nZmxvd1Jlc3VsdC5jcmVhdGVkUHJpY2VzLnB1c2goewogICAgICAgICAgbmFt\nZTogcHJpY2luZ1tpXS5uYW1lLAogICAgICAgICAgc3VjY2VzczogZmFsc2Us\nCiAgICAgICAgICBlcnJvcjogcHJpY2VFcnJvci5yZXNwb25zZT8uZGF0YSB8\nfCBwcmljZUVycm9yLm1lc3NhZ2UKICAgICAgICB9KTsKICAgICAgICB3b3Jr\nZmxvd1Jlc3VsdC5lcnJvcnMucHVzaChgUHJpY2UgY3JlYXRpb24gZmFpbGVk\nOiAke3ByaWNpbmdbaV0ubmFtZX1gKTsKICAgICAgfQogICAgfQogICAgCiAg\nICAvLyBXb3JrZmxvdyBjb21wbGV0aW9uIHN1bW1hcnkKICAgIGNvbnN0IHN1\nbW1hcnkgPSB7CiAgICAgIHN1Y2Nlc3M6IHRydWUsCiAgICAgIHByb2R1Y3RJ\nZDogd29ya2Zsb3dSZXN1bHQucHJvZHVjdD8uaWQsCiAgICAgIHByb2R1Y3RO\nYW1lOiB3b3JrZmxvd1Jlc3VsdC5wcm9kdWN0Py5uYW1lLAogICAgICBwaG90\nb3NVcGxvYWRlZDogd29ya2Zsb3dSZXN1bHQudXBsb2FkZWRQaG90b3MuZmls\ndGVyKHAgPT4gcC5zdWNjZXNzKS5sZW5ndGgsCiAgICAgIHByaWNlc0NyZWF0\nZWQ6IHdvcmtmbG93UmVzdWx0LmNyZWF0ZWRQcmljZXMuZmlsdGVyKHAgPT4g\ncC5zdWNjZXNzKS5sZW5ndGgsCiAgICAgIHRvdGFsRXJyb3JzOiB3b3JrZmxv\nd1Jlc3VsdC5lcnJvcnMubGVuZ3RoCiAgICB9OwogICAgCiAgICBjb25zb2xl\nLmxvZygnPT09IFdPUktGTE9XIENPTVBMRVRFID09PScpOwogICAgY29uc29s\nZS5sb2coYFByb2R1Y3Q6ICR7c3VtbWFyeS5wcm9kdWN0TmFtZX0gKCR7c3Vt\nbWFyeS5wcm9kdWN0SWR9KWApOwogICAgY29uc29sZS5sb2coYFBob3Rvczog\nJHtzdW1tYXJ5LnBob3Rvc1VwbG9hZGVkfS8ke3Bob3Rvcy5sZW5ndGh9IHVw\nbG9hZGVkYCk7CiAgICBjb25zb2xlLmxvZyhgUHJpY2VzOiAke3N1bW1hcnku\ncHJpY2VzQ3JlYXRlZH0vJHtwcmljaW5nLmxlbmd0aH0gY3JlYXRlZGApOwog\nICAgY29uc29sZS5sb2coYEVycm9yczogJHtzdW1tYXJ5LnRvdGFsRXJyb3Jz\nfWApOwogICAgCiAgICByZXMuanNvbih7CiAgICAgIHN1Y2Nlc3M6IHRydWUs\nCiAgICAgIHN1bW1hcnksCiAgICAgIGRldGFpbHM6IHdvcmtmbG93UmVzdWx0\nLAogICAgICBtZXNzYWdlOiAnQ29tcGxldGUgcHJvZHVjdCB3b3JrZmxvdyBl\neGVjdXRlZCcKICAgIH0pOwogICAgCiAgfSBjYXRjaCAoZXJyb3IpIHsKICAg\nIGNvbnNvbGUuZXJyb3IoJ0NvbXBsZXRlIHdvcmtmbG93IGVycm9yOicsIGVy\ncm9yLnJlc3BvbnNlPy5kYXRhIHx8IGVycm9yLm1lc3NhZ2UpOwogICAgcmVz\nLnN0YXR1cyg1MDApLmpzb24oewogICAgICBzdWNjZXNzOiBmYWxzZSwKICAg\nICAgZXJyb3I6IGVycm9yLnJlc3BvbnNlPy5kYXRhIHx8IGVycm9yLm1lc3Nh\nZ2UsCiAgICAgIG1lc3NhZ2U6ICdDb21wbGV0ZSBwcm9kdWN0IHdvcmtmbG93\nIGZhaWxlZCcKICAgIH0pOwogIH0KfSk7CgovLyBNdWx0aS1waG90byB1cGxv\nYWQgZW5kcG9pbnQgKHN0YW5kYWxvbmUpCmFwcC5wb3N0KCcvYXBpL3Bob3Rv\ncy91cGxvYWQtbXVsdGlwbGUnLCB1cGxvYWQuYXJyYXkoJ3Bob3RvcycsIDEw\nKSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgY29uc29sZS5sb2coJz09PSBN\nVUxUSVBMRSBQSE9UTyBVUExPQUQgPT09Jyk7CiAgCiAgdHJ5IHsKICAgIGNv\nbnN0IHsgaW5zdGFsbGF0aW9uX2lkIH0gPSByZXEuYm9keTsKICAgIAogICAg\naWYgKCFpbnN0YWxsYXRpb25faWQpIHsKICAgICAgcmV0dXJuIHJlcy5zdGF0\ndXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnaW5zdGFs\nbGF0aW9uX2lkIHJlcXVpcmVkJyB9KTsKICAgIH0KICAgIAogICAgaWYgKCFy\nZXEuZmlsZXMgfHwgcmVxLmZpbGVzLmxlbmd0aCA9PT0gMCkgewogICAgICBy\nZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwg\nZXJyb3I6ICdObyBwaG90b3MgcHJvdmlkZWQnIH0pOwogICAgfQogICAgCiAg\nICBjb25zb2xlLmxvZyhgVXBsb2FkaW5nICR7cmVxLmZpbGVzLmxlbmd0aH0g\ncGhvdG9zYCk7CiAgICAKICAgIGF3YWl0IGVuc3VyZUZyZXNoVG9rZW4oaW5z\ndGFsbGF0aW9uX2lkKTsKICAgIGNvbnN0IGluc3RhbGxhdGlvbiA9IGluc3Rh\nbGxhdGlvbnMuZ2V0KGluc3RhbGxhdGlvbl9pZCk7CiAgICAKICAgIGNvbnN0\nIHVwbG9hZFJlc3VsdHMgPSBbXTsKICAgIAogICAgZm9yIChsZXQgaSA9IDA7\nIGkgPCByZXEuZmlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgdHJ5IHsKICAg\nICAgICBjb25zdCBmaWxlID0gcmVxLmZpbGVzW2ldOwogICAgICAgIGNvbnNv\nbGUubG9nKGBVcGxvYWRpbmcgcGhvdG8gJHtpICsgMX0vJHtyZXEuZmlsZXMu\nbGVuZ3RofTogJHtmaWxlLm9yaWdpbmFsbmFtZX1gKTsKICAgICAgICAKICAg\nICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAg\nIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZzLmNyZWF0ZVJlYWRTdHJlYW0o\nZmlsZS5wYXRoKSwgewogICAgICAgICAgZmlsZW5hbWU6IGZpbGUub3JpZ2lu\nYWxuYW1lLAogICAgICAgICAgY29udGVudFR5cGU6IGZpbGUubWltZXR5cGUK\nICAgICAgICB9KTsKICAgICAgICAKICAgICAgICBjb25zdCB1cGxvYWRSZXNw\nb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoYGh0dHBzOi8vc2VydmljZXMubGVh\nZGNvbm5lY3RvcmhxLmNvbS9tZWRpYXMvdXBsb2FkLWZpbGVgLCBmb3JtRGF0\nYSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAnQXV0aG9y\naXphdGlvbic6IGBCZWFyZXIgJHtpbnN0YWxsYXRpb24uYWNjZXNzVG9rZW59\nYCwKICAgICAgICAgICAgJ1ZlcnNpb24nOiAnMjAyMS0wNy0yOCcsCiAgICAg\nICAgICAgIC4uLmZvcm1EYXRhLmdldEhlYWRlcnMoKQogICAgICAgICAgfSwK\nICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwCiAgICAgICAgfSk7CiAgICAgICAg\nCiAgICAgICAgdXBsb2FkUmVzdWx0cy5wdXNoKHsKICAgICAgICAgIGZpbGVu\nYW1lOiBmaWxlLm9yaWdpbmFsbmFtZSwKICAgICAgICAgIG1lZGlhSWQ6IHVw\nbG9hZFJlc3BvbnNlLmRhdGEuaWQsCiAgICAgICAgICB1cmw6IHVwbG9hZFJl\nc3BvbnNlLmRhdGEudXJsLAogICAgICAgICAgc2l6ZTogZmlsZS5zaXplLAog\nICAgICAgICAgc3VjY2VzczogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIAog\nICAgICAgIGNvbnNvbGUubG9nKGDinJMgUGhvdG8gdXBsb2FkZWQ6ICR7dXBs\nb2FkUmVzcG9uc2UuZGF0YS5pZH1gKTsKICAgICAgICAKICAgICAgICAvLyBD\nbGVhbiB1cCB0ZW1wIGZpbGUKICAgICAgICBmcy51bmxpbmtTeW5jKGZpbGUu\ncGF0aCk7CiAgICAgICAgCiAgICAgIH0gY2F0Y2ggKHVwbG9hZEVycm9yKSB7\nCiAgICAgICAgY29uc29sZS5lcnJvcihg4pyXIFBob3RvIHVwbG9hZCBmYWls\nZWQ6YCwgdXBsb2FkRXJyb3IucmVzcG9uc2U/LmRhdGEgfHwgdXBsb2FkRXJy\nb3IubWVzc2FnZSk7CiAgICAgICAgdXBsb2FkUmVzdWx0cy5wdXNoKHsKICAg\nICAgICAgIGZpbGVuYW1lOiByZXEuZmlsZXNbaV0ub3JpZ2luYWxuYW1lLAog\nICAgICAgICAgc3VjY2VzczogZmFsc2UsCiAgICAgICAgICBlcnJvcjogdXBs\nb2FkRXJyb3IucmVzcG9uc2U/LmRhdGEgfHwgdXBsb2FkRXJyb3IubWVzc2Fn\nZQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICAKICAgIGNvbnN0IHN1\nY2Nlc3NDb3VudCA9IHVwbG9hZFJlc3VsdHMuZmlsdGVyKHIgPT4gci5zdWNj\nZXNzKS5sZW5ndGg7CiAgICAKICAgIHJlcy5qc29uKHsKICAgICAgc3VjY2Vz\nczogdHJ1ZSwKICAgICAgdG90YWxVcGxvYWRlZDogc3VjY2Vzc0NvdW50LAog\nICAgICB0b3RhbEZpbGVzOiByZXEuZmlsZXMubGVuZ3RoLAogICAgICB1cGxv\nYWRzOiB1cGxvYWRSZXN1bHRzLAogICAgICBtZWRpYUlkczogdXBsb2FkUmVz\ndWx0cy5maWx0ZXIociA9PiByLnN1Y2Nlc3MpLm1hcChyID0+IHIubWVkaWFJ\nZCkKICAgIH0pOwogICAgCiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNv\nbGUuZXJyb3IoJ011bHRpcGxlIHBob3RvIHVwbG9hZCBlcnJvcjonLCBlcnJv\nci5yZXNwb25zZT8uZGF0YSB8fCBlcnJvci5tZXNzYWdlKTsKICAgIHJlcy5z\ndGF0dXMoNTAwKS5qc29uKHsKICAgICAgc3VjY2VzczogZmFsc2UsCiAgICAg\nIGVycm9yOiBlcnJvci5yZXNwb25zZT8uZGF0YSB8fCBlcnJvci5tZXNzYWdl\nLAogICAgICBtZXNzYWdlOiAnTXVsdGlwbGUgcGhvdG8gdXBsb2FkIGZhaWxl\nZCcKICAgIH0pOwogIH0KfSk7CgovLyBFTkhBTkNFRCBQUk9EVUNUIFdPUktG\nTE9XUwoKLy8gQ3JlYXRlIHByb2R1Y3Qgd2l0aCBjb2xsZWN0aW9uIGFzc2ln\nbm1lbnQKYXBwLnBvc3QoJy9hcGkvcHJvZHVjdHMvY3JlYXRlLXdpdGgtY29s\nbGVjdGlvbicsIGFzeW5jIChyZXEsIHJlcykgPT4gewogIGNvbnNvbGUubG9n\nKCc9PT0gUFJPRFVDVCArIENPTExFQ1RJT04gV09SS0ZMT1cgPT09Jyk7CiAg\nCiAgdHJ5IHsKICAgIGNvbnN0IHsgCiAgICAgIG5hbWUsIAogICAgICBkZXNj\ncmlwdGlvbiwgCiAgICAgIHByb2R1Y3RUeXBlLCAKICAgICAgc2t1LCAKICAg\nICAgY3VycmVuY3ksIAogICAgICBjb2xsZWN0aW9uSWQsCiAgICAgIHByaWNp\nbmcgPSBbXSwKICAgICAgbWVkaWFJZHMgPSBbXSwKICAgICAgaW5zdGFsbGF0\naW9uX2lkIAogICAgfSA9IHJlcS5ib2R5OwogICAgCiAgICBpZiAoIWluc3Rh\nbGxhdGlvbl9pZCkgewogICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpz\nb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdpbnN0YWxsYXRpb25faWQg\ncmVxdWlyZWQnIH0pOwogICAgfQogICAgCiAgICBpZiAoIW5hbWUpIHsKICAg\nICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFs\nc2UsIGVycm9yOiAncHJvZHVjdCBuYW1lIHJlcXVpcmVkJyB9KTsKICAgIH0K\nICAgIAogICAgY29uc29sZS5sb2coYENyZWF0aW5nIHByb2R1Y3Qgd2l0aCBj\nb2xsZWN0aW9uIGFzc2lnbm1lbnQ6ICR7bmFtZX1gKTsKICAgIAogICAgYXdh\naXQgZW5zdXJlRnJlc2hUb2tlbihpbnN0YWxsYXRpb25faWQpOwogICAgY29u\nc3QgaW5zdGFsbGF0aW9uID0gaW5zdGFsbGF0aW9ucy5nZXQoaW5zdGFsbGF0\naW9uX2lkKTsKICAgIAogICAgLy8gU3RlcCAxOiBDcmVhdGUgdGhlIHByb2R1\nY3QKICAgIGNvbnN0IHByb2R1Y3REYXRhID0gewogICAgICBuYW1lLAogICAg\nICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gfHwgJycsCiAgICAgIHByb2R1\nY3RUeXBlOiBwcm9kdWN0VHlwZSB8fCAncHJvZHVjdCcsCiAgICAgIHNrdTog\nc2t1IHx8ICcnLAogICAgICBjdXJyZW5jeTogY3VycmVuY3kgfHwgJ1VTRCcs\nCiAgICAgIGxvY2F0aW9uSWQ6IGluc3RhbGxhdGlvbi5sb2NhdGlvbklkLAog\nICAgICBtZWRpYUlkczogbWVkaWFJZHMKICAgIH07CiAgICAKICAgIGNvbnN0\nIHByb2R1Y3RSZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoJ2h0dHBzOi8v\nc2VydmljZXMubGVhZGNvbm5lY3RvcmhxLmNvbS9wcm9kdWN0cy8nLCBwcm9k\ndWN0RGF0YSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgJ0F1dGhvcml6\nYXRpb24nOiBgQmVhcmVyICR7aW5zdGFsbGF0aW9uLmFjY2Vzc1Rva2VufWAs\nCiAgICAgICAgJ1ZlcnNpb24nOiAnMjAyMS0wNy0yOCcsCiAgICAgICAgJ0Nv\nbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICB9CiAgICB9\nKTsKICAgIAogICAgY29uc3QgY3JlYXRlZFByb2R1Y3QgPSBwcm9kdWN0UmVz\ncG9uc2UuZGF0YTsKICAgIGNvbnNvbGUubG9nKCdQcm9kdWN0IGNyZWF0ZWQ6\nJywgY3JlYXRlZFByb2R1Y3QuaWQpOwogICAgCiAgICAvLyBTdGVwIDI6IEFk\nZCBwcmljaW5nIGlmIHByb3ZpZGVkCiAgICBjb25zdCBjcmVhdGVkUHJpY2Vz\nID0gW107CiAgICBpZiAocHJpY2luZy5sZW5ndGggPiAwKSB7CiAgICAgIGZv\nciAoY29uc3QgcHJpY2Ugb2YgcHJpY2luZykgewogICAgICAgIHRyeSB7CiAg\nICAgICAgICBjb25zdCBwcmljZVJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9z\ndChgaHR0cHM6Ly9zZXJ2aWNlcy5sZWFkY29ubmVjdG9yaHEuY29tL3Byb2R1\nY3RzLyR7Y3JlYXRlZFByb2R1Y3QuaWR9L3ByaWNlc2AsIHsKICAgICAgICAg\nICAgbmFtZTogcHJpY2UubmFtZSwKICAgICAgICAgICAgdHlwZTogcHJpY2Uu\ndHlwZSB8fCAnb25lX3RpbWUnLAogICAgICAgICAgICBhbW91bnQ6IHBhcnNl\nSW50KHByaWNlLmFtb3VudCksCiAgICAgICAgICAgIGN1cnJlbmN5OiBwcmlj\nZS5jdXJyZW5jeSB8fCAnVVNEJwogICAgICAgICAgfSwgewogICAgICAgICAg\nICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBg\nQmVhcmVyICR7aW5zdGFsbGF0aW9uLmFjY2Vzc1Rva2VufWAsCiAgICAgICAg\nICAgICAgJ1ZlcnNpb24nOiAnMjAyMS0wNy0yOCcsCiAgICAgICAgICAgICAg\nJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAg\nICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGNyZWF0ZWRQcmljZXMucHVz\naChwcmljZVJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgY29uc29sZS5sb2co\nJ1ByaWNlIGNyZWF0ZWQ6JywgcHJpY2VSZXNwb25zZS5kYXRhLmlkKTsKICAg\nICAgICB9IGNhdGNoIChwcmljZUVycm9yKSB7CiAgICAgICAgICBjb25zb2xl\nLmVycm9yKCdQcmljZSBjcmVhdGlvbiBmYWlsZWQ6JywgcHJpY2VFcnJvci5y\nZXNwb25zZT8uZGF0YSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAK\nICAgIC8vIFN0ZXAgMzogQWRkIHRvIGNvbGxlY3Rpb24gaWYgc3BlY2lmaWVk\nCiAgICBsZXQgY29sbGVjdGlvblVwZGF0ZSA9IG51bGw7CiAgICBpZiAoY29s\nbGVjdGlvbklkKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgdXBkYXRl\nUmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wYXRjaChgaHR0cHM6Ly9zZXJ2aWNl\ncy5sZWFkY29ubmVjdG9yaHEuY29tL2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlv\nbklkfWAsIHsKICAgICAgICAgIHByb2R1Y3RJZHM6IFtjcmVhdGVkUHJvZHVj\ndC5pZF0KICAgICAgICB9LCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAg\nICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2luc3RhbGxhdGlv\nbi5hY2Nlc3NUb2tlbn1gLAogICAgICAgICAgICAnVmVyc2lvbic6ICcyMDIx\nLTA3LTI4JywKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNh\ndGlvbi9qc29uJwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGNv\nbGxlY3Rpb25VcGRhdGUgPSB1cGRhdGVSZXNwb25zZS5kYXRhOwogICAgICAg\nIGNvbnNvbGUubG9nKCdQcm9kdWN0IGFkZGVkIHRvIGNvbGxlY3Rpb246Jywg\nY29sbGVjdGlvbklkKTsKICAgICAgfSBjYXRjaCAoY29sbGVjdGlvbkVycm9y\nKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignQ29sbGVjdGlvbiB1cGRhdGUg\nZmFpbGVkOicsIGNvbGxlY3Rpb25FcnJvci5yZXNwb25zZT8uZGF0YSk7CiAg\nICAgIH0KICAgIH0KICAgIAogICAgcmVzLmpzb24oewogICAgICBzdWNjZXNz\nOiB0cnVlLAogICAgICBwcm9kdWN0OiBjcmVhdGVkUHJvZHVjdCwKICAgICAg\ncHJpY2VzOiBjcmVhdGVkUHJpY2VzLAogICAgICBjb2xsZWN0aW9uOiBjb2xs\nZWN0aW9uVXBkYXRlLAogICAgICBtZXNzYWdlOiAnUHJvZHVjdCBjcmVhdGVk\nIHdpdGggZnVsbCB3b3JrZmxvdycKICAgIH0pOwogICAgCiAgfSBjYXRjaCAo\nZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoJ1Byb2R1Y3Qgd29ya2Zsb3cg\nZXJyb3I6JywgZXJyb3IucmVzcG9uc2U/LmRhdGEgfHwgZXJyb3IubWVzc2Fn\nZSk7CiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7CiAgICAgIHN1Y2Nlc3M6\nIGZhbHNlLAogICAgICBlcnJvcjogZXJyb3IucmVzcG9uc2U/LmRhdGEgfHwg\nZXJyb3IubWVzc2FnZSwKICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBjcmVh\ndGUgcHJvZHVjdCB3aXRoIHdvcmtmbG93JwogICAgfSk7CiAgfQp9KTsKCi8v\nIFRPS0VOIFRFU1QgRU5EUE9JTlQKYXBwLmdldCgnL2FwaS90ZXN0L3Rva2Vu\nJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgY29uc29sZS5sb2coJz09PSBU\nT0tFTiBURVNUIFJFUVVFU1QgPT09Jyk7CiAgCiAgdHJ5IHsKICAgIGNvbnN0\nIHsgaW5zdGFsbGF0aW9uX2lkIH0gPSByZXEucXVlcnk7CiAgICAKICAgIGlm\nICghaW5zdGFsbGF0aW9uX2lkKSB7CiAgICAgIHJldHVybiByZXMuc3RhdHVz\nKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ2luc3RhbGxh\ndGlvbl9pZCByZXF1aXJlZCcgfSk7CiAgICB9CiAgICAKICAgIGF3YWl0IGVu\nc3VyZUZyZXNoVG9rZW4oaW5zdGFsbGF0aW9uX2lkKTsKICAgIGNvbnN0IGlu\nc3RhbGxhdGlvbiA9IGluc3RhbGxhdGlvbnMuZ2V0KGluc3RhbGxhdGlvbl9p\nZCk7CiAgICAKICAgIGNvbnNvbGUubG9nKCdUZXN0aW5nIHRva2VuIHdpdGgg\nbG9jYXRpb24gaW5mbyByZXF1ZXN0Li4uJyk7CiAgICAKICAgIC8vIFRlc3Qg\nd2l0aCBhIHNpbXBsZSBsb2NhdGlvbiBpbmZvIHJlcXVlc3QKICAgIGNvbnN0\nIHRlc3RSZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgaHR0cHM6Ly9zZXJ2\naWNlcy5sZWFkY29ubmVjdG9yaHEuY29tL2xvY2F0aW9ucy8ke2luc3RhbGxh\ndGlvbi5sb2NhdGlvbklkfWAsIHsKICAgICAgaGVhZGVyczogewogICAgICAg\nICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2luc3RhbGxhdGlvbi5hY2Nl\nc3NUb2tlbn1gLAogICAgICAgICdWZXJzaW9uJzogJzIwMjEtMDctMjgnCiAg\nICAgIH0KICAgIH0pOwogICAgCiAgICBjb25zb2xlLmxvZygnVG9rZW4gdGVz\ndCBzdWNjZXNzZnVsOicsIHRlc3RSZXNwb25zZS5zdGF0dXMpOwogICAgCiAg\nICByZXMuanNvbih7CiAgICAgIHN1Y2Nlc3M6IHRydWUsCiAgICAgIHRva2Vu\nU3RhdHVzOiAndmFsaWQnLAogICAgICBsb2NhdGlvbklkOiBpbnN0YWxsYXRp\nb24ubG9jYXRpb25JZCwKICAgICAgc2NvcGVzOiBpbnN0YWxsYXRpb24uc2Nv\ncGVzLAogICAgICBsb2NhdGlvbkRhdGE6IHRlc3RSZXNwb25zZS5kYXRhCiAg\nICB9KTsKICAgIAogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zb2xlLmVy\ncm9yKCdUb2tlbiB0ZXN0IGVycm9yOicsIGVycm9yLnJlc3BvbnNlPy5kYXRh\nIHx8IGVycm9yLm1lc3NhZ2UpOwogICAgY29uc29sZS5lcnJvcignRXJyb3Ig\nc3RhdHVzOicsIGVycm9yLnJlc3BvbnNlPy5zdGF0dXMpOwogICAgcmVzLnN0\nYXR1cyg1MDApLmpzb24oewogICAgICBzdWNjZXNzOiBmYWxzZSwKICAgICAg\nZXJyb3I6IGVycm9yLnJlc3BvbnNlPy5kYXRhIHx8IGVycm9yLm1lc3NhZ2Us\nCiAgICAgIHN0YXR1czogZXJyb3IucmVzcG9uc2U/LnN0YXR1cywKICAgICAg\nbWVzc2FnZTogJ1Rva2VuIHRlc3QgZmFpbGVkJwogICAgfSk7CiAgfQp9KTsK\nCi8vIENVU1RPTUVSIFNVUFBPUlQgRU5EUE9JTlRTCgovLyBDcmVhdGUgc3Vw\ncG9ydCB0aWNrZXQKYXBwLnBvc3QoJy9hcGkvc3VwcG9ydC90aWNrZXRzJywg\nYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgY29uc29sZS5sb2coJz09PSBTVVBQ\nT1JUIFRJQ0tFVCBDUkVBVElPTiA9PT0nKTsKICAKICB0cnkgewogICAgY29u\nc3QgeyAKICAgICAgY3VzdG9tZXJFbWFpbCwgCiAgICAgIGN1c3RvbWVyTmFt\nZSwKICAgICAgc3ViamVjdCwgCiAgICAgIGRlc2NyaXB0aW9uLCAKICAgICAg\ncHJpb3JpdHkgPSAnbWVkaXVtJywKICAgICAgY2F0ZWdvcnkgPSAnZ2VuZXJh\nbCcsCiAgICAgIGluc3RhbGxhdGlvbklkIAogICAgfSA9IHJlcS5ib2R5Owog\nICAgCiAgICBpZiAoIWN1c3RvbWVyRW1haWwgfHwgIXN1YmplY3QgfHwgIWRl\nc2NyaXB0aW9uKSB7CiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNv\nbih7IAogICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCAKICAgICAgICBlcnJvcjog\nJ2N1c3RvbWVyRW1haWwsIHN1YmplY3QsIGFuZCBkZXNjcmlwdGlvbiBhcmUg\ncmVxdWlyZWQnIAogICAgICB9KTsKICAgIH0KICAgIAogICAgY29uc3QgdGlj\na2V0SWQgPSAndGlja2V0XycgKyBEYXRlLm5vdygpOwogICAgY29uc3QgdGlj\na2V0ID0gewogICAgICBpZDogdGlja2V0SWQsCiAgICAgIGN1c3RvbWVyRW1h\naWwsCiAgICAgIGN1c3RvbWVyTmFtZTogY3VzdG9tZXJOYW1lIHx8ICdVbmtu\nb3duJywKICAgICAgc3ViamVjdCwKICAgICAgZGVzY3JpcHRpb24sCiAgICAg\nIHByaW9yaXR5LCAvLyBsb3csIG1lZGl1bSwgaGlnaCwgdXJnZW50CiAgICAg\nIGNhdGVnb3J5LCAvLyBnZW5lcmFsLCB0ZWNobmljYWwsIGJpbGxpbmcsIGZl\nYXR1cmVfcmVxdWVzdAogICAgICBzdGF0dXM6ICdvcGVuJywgLy8gb3Blbiwg\naW5fcHJvZ3Jlc3MsIHdhaXRpbmdfY3VzdG9tZXIsIHJlc29sdmVkLCBjbG9z\nZWQKICAgICAgaW5zdGFsbGF0aW9uSWQsCiAgICAgIGNyZWF0ZWRBdDogbmV3\nIERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICB1cGRhdGVkQXQ6IG5ldyBE\nYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgbWVzc2FnZXM6IFt7CiAgICAg\nICAgaWQ6ICdtc2dfJyArIERhdGUubm93KCksCiAgICAgICAgZnJvbTogJ2N1\nc3RvbWVyJywKICAgICAgICBjb250ZW50OiBkZXNjcmlwdGlvbiwKICAgICAg\nICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKQogICAgICB9\nXSwKICAgICAgYXNzaWduZWRUbzogbnVsbCwKICAgICAgdGFnczogW10sCiAg\nICAgIHNhdGlzZmFjdGlvbjogbnVsbAogICAgfTsKICAgIAogICAgc3VwcG9y\ndFRpY2tldHMuc2V0KHRpY2tldElkLCB0aWNrZXQpOwogICAgc3VwcG9ydE1l\ndHJpY3MudG90YWxUaWNrZXRzKys7CiAgICAKICAgIGNvbnNvbGUubG9nKGBT\ndXBwb3J0IHRpY2tldCBjcmVhdGVkOiAke3RpY2tldElkfWApOwogICAgCiAg\nICByZXMuanNvbih7CiAgICAgIHN1Y2Nlc3M6IHRydWUsCiAgICAgIHRpY2tl\ndCwKICAgICAgbWVzc2FnZTogJ1N1cHBvcnQgdGlja2V0IGNyZWF0ZWQgc3Vj\nY2Vzc2Z1bGx5JwogICAgfSk7CiAgICAKICB9IGNhdGNoIChlcnJvcikgewog\nICAgY29uc29sZS5lcnJvcignU3VwcG9ydCB0aWNrZXQgY3JlYXRpb24gZXJy\nb3I6JywgZXJyb3IubWVzc2FnZSk7CiAgICByZXMuc3RhdHVzKDUwMCkuanNv\nbih7CiAgICAgIHN1Y2Nlc3M6IGZhbHNlLAogICAgICBlcnJvcjogZXJyb3Iu\nbWVzc2FnZSwKICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBjcmVhdGUgc3Vw\ncG9ydCB0aWNrZXQnCiAgICB9KTsKICB9Cn0pOwoKLy8gR2V0IHN1cHBvcnQg\ndGlja2V0cyAoYWRtaW4gdmlldykKYXBwLmdldCgnL2FwaS9zdXBwb3J0L3Rp\nY2tldHMnLCAocmVxLCByZXMpID0+IHsKICB0cnkgewogICAgY29uc3QgeyBz\ndGF0dXMsIHByaW9yaXR5LCBjYXRlZ29yeSwgY3VzdG9tZXJFbWFpbCB9ID0g\ncmVxLnF1ZXJ5OwogICAgbGV0IHRpY2tldHMgPSBBcnJheS5mcm9tKHN1cHBv\ncnRUaWNrZXRzLnZhbHVlcygpKTsKICAgIAogICAgLy8gQXBwbHkgZmlsdGVy\ncwogICAgaWYgKHN0YXR1cykgdGlja2V0cyA9IHRpY2tldHMuZmlsdGVyKHQg\nPT4gdC5zdGF0dXMgPT09IHN0YXR1cyk7CiAgICBpZiAocHJpb3JpdHkpIHRp\nY2tldHMgPSB0aWNrZXRzLmZpbHRlcih0ID0+IHQucHJpb3JpdHkgPT09IHBy\naW9yaXR5KTsKICAgIGlmIChjYXRlZ29yeSkgdGlja2V0cyA9IHRpY2tldHMu\nZmlsdGVyKHQgPT4gdC5jYXRlZ29yeSA9PT0gY2F0ZWdvcnkpOwogICAgaWYg\nKGN1c3RvbWVyRW1haWwpIHRpY2tldHMgPSB0aWNrZXRzLmZpbHRlcih0ID0+\nIHQuY3VzdG9tZXJFbWFpbCA9PT0gY3VzdG9tZXJFbWFpbCk7CiAgICAKICAg\nIC8vIFNvcnQgYnkgY3JlYXRpb24gZGF0ZSAobmV3ZXN0IGZpcnN0KQogICAg\ndGlja2V0cy5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLmNyZWF0ZWRBdCkg\nLSBuZXcgRGF0ZShhLmNyZWF0ZWRBdCkpOwogICAgCiAgICByZXMuanNvbih7\nCiAgICAgIHN1Y2Nlc3M6IHRydWUsCiAgICAgIHRpY2tldHMsCiAgICAgIGNv\ndW50OiB0aWNrZXRzLmxlbmd0aCwKICAgICAgbWV0cmljczogc3VwcG9ydE1l\ndHJpY3MKICAgIH0pOwogICAgCiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIHJl\ncy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBl\ncnJvci5tZXNzYWdlIH0pOwogIH0KfSk7CgovLyBHZXQgc3BlY2lmaWMgdGlj\na2V0CmFwcC5nZXQoJy9hcGkvc3VwcG9ydC90aWNrZXRzLzp0aWNrZXRJZCcs\nIChyZXEsIHJlcykgPT4gewogIHRyeSB7CiAgICBjb25zdCB0aWNrZXQgPSBz\ndXBwb3J0VGlja2V0cy5nZXQocmVxLnBhcmFtcy50aWNrZXRJZCk7CiAgICAK\nICAgIGlmICghdGlja2V0KSB7CiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQw\nNCkuanNvbih7IAogICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCAKICAgICAgICBl\ncnJvcjogJ1RpY2tldCBub3QgZm91bmQnIAogICAgICB9KTsKICAgIH0KICAg\nIAogICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCB0aWNrZXQgfSk7CiAg\nICAKICB9IGNhdGNoIChlcnJvcikgewogICAgcmVzLnN0YXR1cyg1MDApLmpz\nb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7\nCiAgfQp9KTsKCi8vIFVwZGF0ZSB0aWNrZXQgc3RhdHVzCmFwcC5wYXRjaCgn\nL2FwaS9zdXBwb3J0L3RpY2tldHMvOnRpY2tldElkJywgKHJlcSwgcmVzKSA9\nPiB7CiAgdHJ5IHsKICAgIGNvbnN0IHRpY2tldCA9IHN1cHBvcnRUaWNrZXRz\nLmdldChyZXEucGFyYW1zLnRpY2tldElkKTsKICAgIAogICAgaWYgKCF0aWNr\nZXQpIHsKICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgCiAg\nICAgICAgc3VjY2VzczogZmFsc2UsIAogICAgICAgIGVycm9yOiAnVGlja2V0\nIG5vdCBmb3VuZCcgCiAgICAgIH0pOwogICAgfQogICAgCiAgICBjb25zdCB7\nIHN0YXR1cywgYXNzaWduZWRUbywgcHJpb3JpdHksIHRhZ3MgfSA9IHJlcS5i\nb2R5OwogICAgCiAgICBpZiAoc3RhdHVzKSB0aWNrZXQuc3RhdHVzID0gc3Rh\ndHVzOwogICAgaWYgKGFzc2lnbmVkVG8gIT09IHVuZGVmaW5lZCkgdGlja2V0\nLmFzc2lnbmVkVG8gPSBhc3NpZ25lZFRvOwogICAgaWYgKHByaW9yaXR5KSB0\naWNrZXQucHJpb3JpdHkgPSBwcmlvcml0eTsKICAgIGlmICh0YWdzKSB0aWNr\nZXQudGFncyA9IHRhZ3M7CiAgICAKICAgIHRpY2tldC51cGRhdGVkQXQgPSBu\nZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CiAgICAKICAgIC8vIFVwZGF0ZSBt\nZXRyaWNzCiAgICBpZiAoc3RhdHVzID09PSAncmVzb2x2ZWQnIHx8IHN0YXR1\ncyA9PT0gJ2Nsb3NlZCcpIHsKICAgICAgc3VwcG9ydE1ldHJpY3MucmVzb2x2\nZWRUaWNrZXRzKys7CiAgICB9CiAgICAKICAgIHN1cHBvcnRUaWNrZXRzLnNl\ndChyZXEucGFyYW1zLnRpY2tldElkLCB0aWNrZXQpOwogICAgCiAgICByZXMu\nanNvbih7IHN1Y2Nlc3M6IHRydWUsIHRpY2tldCB9KTsKICAgIAogIH0gY2F0\nY2ggKGVycm9yKSB7CiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nl\nc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTsKICB9Cn0pOwoK\nLy8gQWRkIG1lc3NhZ2UgdG8gdGlja2V0CmFwcC5wb3N0KCcvYXBpL3N1cHBv\ncnQvdGlja2V0cy86dGlja2V0SWQvbWVzc2FnZXMnLCAocmVxLCByZXMpID0+\nIHsKICB0cnkgewogICAgY29uc3QgdGlja2V0ID0gc3VwcG9ydFRpY2tldHMu\nZ2V0KHJlcS5wYXJhbXMudGlja2V0SWQpOwogICAgCiAgICBpZiAoIXRpY2tl\ndCkgewogICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyAKICAg\nICAgICBzdWNjZXNzOiBmYWxzZSwgCiAgICAgICAgZXJyb3I6ICdUaWNrZXQg\nbm90IGZvdW5kJyAKICAgICAgfSk7CiAgICB9CiAgICAKICAgIGNvbnN0IHsg\nY29udGVudCwgZnJvbSA9ICdzdXBwb3J0JyB9ID0gcmVxLmJvZHk7CiAgICAK\nICAgIGlmICghY29udGVudCkgewogICAgICByZXR1cm4gcmVzLnN0YXR1cyg0\nMDApLmpzb24oeyAKICAgICAgICBzdWNjZXNzOiBmYWxzZSwgCiAgICAgICAg\nZXJyb3I6ICdNZXNzYWdlIGNvbnRlbnQgaXMgcmVxdWlyZWQnIAogICAgICB9\nKTsKICAgIH0KICAgIAogICAgY29uc3QgbWVzc2FnZSA9IHsKICAgICAgaWQ6\nICdtc2dfJyArIERhdGUubm93KCksCiAgICAgIGZyb20sIC8vICdjdXN0b21l\ncicgb3IgJ3N1cHBvcnQnCiAgICAgIGNvbnRlbnQsCiAgICAgIHRpbWVzdGFt\ncDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpCiAgICB9OwogICAgCiAgICB0\naWNrZXQubWVzc2FnZXMucHVzaChtZXNzYWdlKTsKICAgIHRpY2tldC51cGRh\ndGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CiAgICAKICAgIHN1\ncHBvcnRUaWNrZXRzLnNldChyZXEucGFyYW1zLnRpY2tldElkLCB0aWNrZXQp\nOwogICAgCiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2Us\nIHRpY2tldCB9KTsKICAgIAogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZXMu\nc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJy\nb3IubWVzc2FnZSB9KTsKICB9Cn0pOwoKLy8gQ3VzdG9tZXIgc2F0aXNmYWN0\naW9uIHJhdGluZwphcHAucG9zdCgnL2FwaS9zdXBwb3J0L3RpY2tldHMvOnRp\nY2tldElkL3NhdGlzZmFjdGlvbicsIChyZXEsIHJlcykgPT4gewogIHRyeSB7\nCiAgICBjb25zdCB0aWNrZXQgPSBzdXBwb3J0VGlja2V0cy5nZXQocmVxLnBh\ncmFtcy50aWNrZXRJZCk7CiAgICAKICAgIGlmICghdGlja2V0KSB7CiAgICAg\nIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IAogICAgICAgIHN1Y2Nl\nc3M6IGZhbHNlLCAKICAgICAgICBlcnJvcjogJ1RpY2tldCBub3QgZm91bmQn\nIAogICAgICB9KTsKICAgIH0KICAgIAogICAgY29uc3QgeyByYXRpbmcsIGZl\nZWRiYWNrIH0gPSByZXEuYm9keTsgLy8gcmF0aW5nOiAxLTUKICAgIAogICAg\naWYgKCFyYXRpbmcgfHwgcmF0aW5nIDwgMSB8fCByYXRpbmcgPiA1KSB7CiAg\nICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IAogICAgICAgIHN1\nY2Nlc3M6IGZhbHNlLCAKICAgICAgICBlcnJvcjogJ1JhdGluZyBtdXN0IGJl\nIGJldHdlZW4gMSBhbmQgNScgCiAgICAgIH0pOwogICAgfQogICAgCiAgICB0\naWNrZXQuc2F0aXNmYWN0aW9uID0geyByYXRpbmcsIGZlZWRiYWNrLCBzdWJt\naXR0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH07CiAgICB0aWNr\nZXQudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogICAg\nCiAgICBzdXBwb3J0VGlja2V0cy5zZXQocmVxLnBhcmFtcy50aWNrZXRJZCwg\ndGlja2V0KTsKICAgIAogICAgLy8gVXBkYXRlIGF2ZXJhZ2Ugc2F0aXNmYWN0\naW9uCiAgICBjb25zdCBzYXRpc2ZhY3Rpb25SYXRpbmdzID0gQXJyYXkuZnJv\nbShzdXBwb3J0VGlja2V0cy52YWx1ZXMoKSkKICAgICAgLmZpbHRlcih0ID0+\nIHQuc2F0aXNmYWN0aW9uKQogICAgICAubWFwKHQgPT4gdC5zYXRpc2ZhY3Rp\nb24ucmF0aW5nKTsKICAgICAgCiAgICBpZiAoc2F0aXNmYWN0aW9uUmF0aW5n\ncy5sZW5ndGggPiAwKSB7CiAgICAgIHN1cHBvcnRNZXRyaWNzLmN1c3RvbWVy\nU2F0aXNmYWN0aW9uID0gCiAgICAgICAgc2F0aXNmYWN0aW9uUmF0aW5ncy5y\nZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKSAvIHNhdGlzZmFjdGlvblJhdGlu\nZ3MubGVuZ3RoOwogICAgfQogICAgCiAgICByZXMuanNvbih7IHN1Y2Nlc3M6\nIHRydWUsIHRpY2tldCB9KTsKICAgIAogIH0gY2F0Y2ggKGVycm9yKSB7CiAg\nICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJv\ncjogZXJyb3IubWVzc2FnZSB9KTsKICB9Cn0pOwoKLy8gU3VwcG9ydCBhbmFs\neXRpY3MgZGFzaGJvYXJkCmFwcC5nZXQoJy9hcGkvc3VwcG9ydC9hbmFseXRp\nY3MnLCAocmVxLCByZXMpID0+IHsKICB0cnkgewogICAgY29uc3QgdGlja2V0\ncyA9IEFycmF5LmZyb20oc3VwcG9ydFRpY2tldHMudmFsdWVzKCkpOwogICAg\nY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKICAgIGNvbnN0IGxhc3QzMERheXMg\nPSBuZXcgRGF0ZShub3cgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApOwog\nICAgCiAgICBjb25zdCBhbmFseXRpY3MgPSB7CiAgICAgIG92ZXJ2aWV3OiBz\ndXBwb3J0TWV0cmljcywKICAgICAgdGlja2V0c0J5U3RhdHVzOiB7CiAgICAg\nICAgb3BlbjogdGlja2V0cy5maWx0ZXIodCA9PiB0LnN0YXR1cyA9PT0gJ29w\nZW4nKS5sZW5ndGgsCiAgICAgICAgaW5fcHJvZ3Jlc3M6IHRpY2tldHMuZmls\ndGVyKHQgPT4gdC5zdGF0dXMgPT09ICdpbl9wcm9ncmVzcycpLmxlbmd0aCwK\nICAgICAgICB3YWl0aW5nX2N1c3RvbWVyOiB0aWNrZXRzLmZpbHRlcih0ID0+\nIHQuc3RhdHVzID09PSAnd2FpdGluZ19jdXN0b21lcicpLmxlbmd0aCwKICAg\nICAgICByZXNvbHZlZDogdGlja2V0cy5maWx0ZXIodCA9PiB0LnN0YXR1cyA9\nPT0gJ3Jlc29sdmVkJykubGVuZ3RoLAogICAgICAgIGNsb3NlZDogdGlja2V0\ncy5maWx0ZXIodCA9PiB0LnN0YXR1cyA9PT0gJ2Nsb3NlZCcpLmxlbmd0aAog\nICAgICB9LAogICAgICB0aWNrZXRzQnlQcmlvcml0eTogewogICAgICAgIGxv\ndzogdGlja2V0cy5maWx0ZXIodCA9PiB0LnByaW9yaXR5ID09PSAnbG93Jyku\nbGVuZ3RoLAogICAgICAgIG1lZGl1bTogdGlja2V0cy5maWx0ZXIodCA9PiB0\nLnByaW9yaXR5ID09PSAnbWVkaXVtJykubGVuZ3RoLAogICAgICAgIGhpZ2g6\nIHRpY2tldHMuZmlsdGVyKHQgPT4gdC5wcmlvcml0eSA9PT0gJ2hpZ2gnKS5s\nZW5ndGgsCiAgICAgICAgdXJnZW50OiB0aWNrZXRzLmZpbHRlcih0ID0+IHQu\ncHJpb3JpdHkgPT09ICd1cmdlbnQnKS5sZW5ndGgKICAgICAgfSwKICAgICAg\ndGlja2V0c0J5Q2F0ZWdvcnk6IHsKICAgICAgICBnZW5lcmFsOiB0aWNrZXRz\nLmZpbHRlcih0ID0+IHQuY2F0ZWdvcnkgPT09ICdnZW5lcmFsJykubGVuZ3Ro\nLAogICAgICAgIHRlY2huaWNhbDogdGlja2V0cy5maWx0ZXIodCA9PiB0LmNh\ndGVnb3J5ID09PSAndGVjaG5pY2FsJykubGVuZ3RoLAogICAgICAgIGJpbGxp\nbmc6IHRpY2tldHMuZmlsdGVyKHQgPT4gdC5jYXRlZ29yeSA9PT0gJ2JpbGxp\nbmcnKS5sZW5ndGgsCiAgICAgICAgZmVhdHVyZV9yZXF1ZXN0OiB0aWNrZXRz\nLmZpbHRlcih0ID0+IHQuY2F0ZWdvcnkgPT09ICdmZWF0dXJlX3JlcXVlc3Qn\nKS5sZW5ndGgKICAgICAgfSwKICAgICAgcmVjZW50QWN0aXZpdHk6IHRpY2tl\ndHMKICAgICAgICAuZmlsdGVyKHQgPT4gbmV3IERhdGUodC5jcmVhdGVkQXQp\nID4gbGFzdDMwRGF5cykKICAgICAgICAubGVuZ3RoLAogICAgICBhdmVyYWdl\nUmVzb2x1dGlvblRpbWU6IGNhbGN1bGF0ZUF2ZXJhZ2VSZXNvbHV0aW9uVGlt\nZSh0aWNrZXRzKSwKICAgICAgdG9wQ3VzdG9tZXJzOiBnZXRUb3BDdXN0b21l\ncnModGlja2V0cykKICAgIH07CiAgICAKICAgIHJlcy5qc29uKHsgc3VjY2Vz\nczogdHJ1ZSwgYW5hbHl0aWNzIH0pOwogICAgCiAgfSBjYXRjaCAoZXJyb3Ip\nIHsKICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2Us\nIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pOwogIH0KfSk7CgovLyBDdXN0b21l\nciBzZWxmLXNlcnZpY2UgcG9ydGFsCmFwcC5nZXQoJy9hcGkvc3VwcG9ydC9j\ndXN0b21lci86Y3VzdG9tZXJFbWFpbC90aWNrZXRzJywgKHJlcSwgcmVzKSA9\nPiB7CiAgdHJ5IHsKICAgIGNvbnN0IGN1c3RvbWVyRW1haWwgPSByZXEucGFy\nYW1zLmN1c3RvbWVyRW1haWw7CiAgICBjb25zdCB0aWNrZXRzID0gQXJyYXku\nZnJvbShzdXBwb3J0VGlja2V0cy52YWx1ZXMoKSkKICAgICAgLmZpbHRlcih0\nID0+IHQuY3VzdG9tZXJFbWFpbCA9PT0gY3VzdG9tZXJFbWFpbCkKICAgICAg\nLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIuY3JlYXRlZEF0KSAtIG5ldyBE\nYXRlKGEuY3JlYXRlZEF0KSk7CiAgICAKICAgIHJlcy5qc29uKHsKICAgICAg\nc3VjY2VzczogdHJ1ZSwKICAgICAgdGlja2V0czogdGlja2V0cy5tYXAodCA9\nPiAoewogICAgICAgIGlkOiB0LmlkLAogICAgICAgIHN1YmplY3Q6IHQuc3Vi\namVjdCwKICAgICAgICBzdGF0dXM6IHQuc3RhdHVzLAogICAgICAgIHByaW9y\naXR5OiB0LnByaW9yaXR5LAogICAgICAgIGNhdGVnb3J5OiB0LmNhdGVnb3J5\nLAogICAgICAgIGNyZWF0ZWRBdDogdC5jcmVhdGVkQXQsCiAgICAgICAgdXBk\nYXRlZEF0OiB0LnVwZGF0ZWRBdCwKICAgICAgICBtZXNzYWdlQ291bnQ6IHQu\nbWVzc2FnZXMubGVuZ3RoCiAgICAgIH0pKSwKICAgICAgY291bnQ6IHRpY2tl\ndHMubGVuZ3RoCiAgICB9KTsKICAgIAogIH0gY2F0Y2ggKGVycm9yKSB7CiAg\nICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJv\ncjogZXJyb3IubWVzc2FnZSB9KTsKICB9Cn0pOwoKLy8gSGVscGVyIGZ1bmN0\naW9ucwpmdW5jdGlvbiBjYWxjdWxhdGVBdmVyYWdlUmVzb2x1dGlvblRpbWUo\ndGlja2V0cykgewogIGNvbnN0IHJlc29sdmVkVGlja2V0cyA9IHRpY2tldHMu\nZmlsdGVyKHQgPT4gdC5zdGF0dXMgPT09ICdyZXNvbHZlZCcgfHwgdC5zdGF0\ndXMgPT09ICdjbG9zZWQnKTsKICBpZiAocmVzb2x2ZWRUaWNrZXRzLmxlbmd0\naCA9PT0gMCkgcmV0dXJuIDA7CiAgCiAgY29uc3QgdG90YWxUaW1lID0gcmVz\nb2x2ZWRUaWNrZXRzLnJlZHVjZSgoc3VtLCB0aWNrZXQpID0+IHsKICAgIGNv\nbnN0IGNyZWF0ZWQgPSBuZXcgRGF0ZSh0aWNrZXQuY3JlYXRlZEF0KTsKICAg\nIGNvbnN0IHVwZGF0ZWQgPSBuZXcgRGF0ZSh0aWNrZXQudXBkYXRlZEF0KTsK\nICAgIHJldHVybiBzdW0gKyAodXBkYXRlZCAtIGNyZWF0ZWQpOwogIH0sIDAp\nOwogIAogIHJldHVybiBNYXRoLnJvdW5kKHRvdGFsVGltZSAvIHJlc29sdmVk\nVGlja2V0cy5sZW5ndGggLyAoMTAwMCAqIDYwICogNjApKTsgLy8gaG91cnMK\nfQoKZnVuY3Rpb24gZ2V0VG9wQ3VzdG9tZXJzKHRpY2tldHMpIHsKICBjb25z\ndCBjdXN0b21lckNvdW50cyA9IHt9OwogIHRpY2tldHMuZm9yRWFjaCh0aWNr\nZXQgPT4gewogICAgY3VzdG9tZXJDb3VudHNbdGlja2V0LmN1c3RvbWVyRW1h\naWxdID0gKGN1c3RvbWVyQ291bnRzW3RpY2tldC5jdXN0b21lckVtYWlsXSB8\nfCAwKSArIDE7CiAgfSk7CiAgCiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGN1\nc3RvbWVyQ291bnRzKQogICAgLnNvcnQoKFssYV0sIFssYl0pID0+IGIgLSBh\nKQogICAgLnNsaWNlKDAsIDUpCiAgICAubWFwKChbZW1haWwsIGNvdW50XSkg\nPT4gKHsgZW1haWwsIHRpY2tldENvdW50OiBjb3VudCB9KSk7Cn0KCi8vIFN0\nYXJ0IHNlcnZlcgphcHAubGlzdGVuKHBvcnQsICgpID0+IHsKICBjb25zb2xl\nLmxvZyhgT0F1dGggYmFja2VuZCB3aXRoIGN1c3RvbWVyIHN1cHBvcnQgcnVu\nbmluZyBvbiBwb3J0ICR7cG9ydH1gKTsKICBjb25zb2xlLmxvZyhgVmVyc2lv\nbjogNi4wLjAtY3VzdG9tZXItc3VwcG9ydGApOwogIGNvbnNvbGUubG9nKGBG\nZWF0dXJlczogT0F1dGgsIFByb2R1Y3RzLCBNZWRpYSBVcGxvYWQsIFByaWNp\nbmcsIEN1c3RvbWVyIFN1cHBvcnRgKTsKICBjb25zb2xlLmxvZyhgSW5zdGFs\nbGF0aW9uczogJHtpbnN0YWxsYXRpb25zLnNpemV9YCk7CiAgY29uc29sZS5s\nb2coJ0N1c3RvbWVyIHN1cHBvcnQgc3lzdGVtOiBSZWFkeScpOwp9KTsK\n",
  "encoding": "base64",
  "_links": {
    "self": "https://api.github.com/repos/EngageAutomations/oauth-backend/contents/index.js?ref=main",
    "git": "https://api.github.com/repos/EngageAutomations/oauth-backend/git/blobs/d58f0bc77e6b4c0670c2581f0b0415eb453e5d3a",
    "html": "https://github.com/EngageAutomations/oauth-backend/blob/main/index.js"
  }
}
